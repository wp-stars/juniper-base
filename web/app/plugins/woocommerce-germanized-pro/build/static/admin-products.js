jQuery((function(e){var t={init:function(){var a=t;e("#general_product_data, .woocommerce_variable_attributes").on("recalculate_unit_prices",(function(){a.recalculateUnitPrices(e(this))})),e(document).on("click","#_unit_price_auto",(function(){e(this).is(":checked")?e(this).parents("#general_product_data").trigger("recalculate_unit_prices"):(e("input").removeClass("wc_input_error"),e("#general_product_data").find("input[name=_unit_price_regular]").removeAttr("readonly"),e("#general_product_data").find("input[name=_unit_price_sale]").removeAttr("readonly"))})),e(document).on("change","input[name=_regular_price], input[name=_sale_price], input[name=_unit_base], input[name=_unit_product]",(function(){e("input[name=_unit_price_auto]").is(":checked")&&(e(this).parents("#general_product_data").trigger("recalculate_unit_prices"),e(this).parents(".product_data").find(".woocommerce_variable_attributes").length>0&&e(this).parents(".product_data").find(".woocommerce_variable_attributes").each((function(){a.recalculateUnitPrices(e(this))})))})),e("input[name=_regular_price]").trigger("change"),e(document).find(".woocommerce_variable_attributes").addClass("event-bound"),e(document).on("click","input[name*=variable_unit_price_auto]",(function(){e(this).parents(".woocommerce_variable_attributes").hasClass("event-bound")||(e(this).parents(".woocommerce_variable_attributes").addClass("event-bound"),e(this).parents(".woocommerce_variable_attributes").bind("recalculate_unit_prices",(function(){a.recalculateUnitPrices(e(this))}))),e(this).is(":checked")?e(this).parents(".woocommerce_variable_attributes").trigger("recalculate_unit_prices"):(e(this).parents(".woocommerce_variable_attributes").find("input").removeClass("wc_input_error"),e(this).parents(".woocommerce_variable_attributes").find("input[name*=variable_unit_price_regular]").removeAttr("readonly"),e(this).parents(".woocommerce_variable_attributes").find("input[name*=variable_unit_price_sale]").removeAttr("readonly"))})),e(document).on("change","input[name*=variable_regular_price], input[name*=variable_sale_price], input[name*=variable_unit_product]",(function(){e(this).parents(".woocommerce_variable_attributes").find("input[name*=variable_unit_price_auto]").is(":checked")&&a.recalculateUnitPrices(e(this).parents(".woocommerce_variable_attributes"))})),e(document).on("click",".woocommerce_variation",(function(){e(this).find("input[name*=variable_unit_price_auto]").is(":checked")&&(e(this).find("input[name*=variable_unit_price_regular]").attr("readonly","readonly"),e(this).find("input[name*=variable_unit_price_sale]").attr("readonly","readonly"),a.recalculateUnitPrices(e(this).find(".woocommerce_variable_attributes")))})),e(document).on("woocommerce_variations_loaded",(function(){e(".woocommerce_variations .woocommerce_variable_attributes").each((function(){e(this).find("input[name*=variable_unit_price_auto]").is(":checked")&&a.recalculateUnitPrices(e(this))}))})),e(document).on("click","a.wc-gzdp-clear-nutrients",(function(){return(e(this).parents(".variable_nutrients").length>0?e(this).parents(".variable_nutrients"):e(this).parents(".nutrients")).find(".form-row-nutrient input.wc_input_price").val(""),!1})),e(document).on("paste",".form-row-nutrient input.wc_input_price",a.onPasteNutrientData)},onPasteNutrientData:function(t){var a=wc_gzdp_admin_products_params.i18n_nutrient_units_regex,i=t.originalEvent.clipboardData.getData("text");i=i.toLowerCase();var n=(i=/[0-9]{1,},\d{1,}/g.test(i)?i.replace(/([1-9]{1})(\.)(.*)/g,"$1$3"):i.replace(/([0-9]{1})(\.)(.*)/g,"$1,$3")).split("\n");n=(n=n.map((function(e){return e.replace(/\s/g," ")}))).filter(Boolean);var r=e(this).parents(".variable_nutrients").length>0?e(this).parents(".variable_nutrients"):e(this).parents(".nutrients"),u=[];if(hasReplaced=!1,r.find(".form-row-nutrient input[data-unit]").each((function(){u.push({input:e(this),unit:e(this).data("unit"),regex:e(this).data("regex"),nutrientId:e(this).data("nutrient-id")})})),e.each(n,(function(t,i){var c=new RegExp(wc_gzdp_admin_products_params.i18n_nutrient_reference_values_regex,"i");c.test(i)?e.each(wc_gzdp_admin_products_params.i18n_nutrient_reference_values,(function(e,t){if((c=new RegExp(e,"i")).test(i)){var a=r.find(".nutrient-reference-value-wrapper").find("label").text();return console.log("Detected "+a+" in clipboard = "+t),r.find(".nutrient-reference-value-wrapper select").val(t),!1}})):e.each(u,(function(r,c){if(void 0!==c){var _=new RegExp(c.regex,"i"),o=i;if(_.test(i)){console.log("Detected "+c.nutrientId+" in clipboard line "+i),new RegExp("[0-9](.*)"+a).test(i)||n.length>=t+1&&(o=n[t+1]);var l=[];if(new RegExp("[0-9](.*)"+a).test(o))for(var p,s=new RegExp("([1-9]\\d*|0)(,\\d+)?(\\s"+a+")?","gi");null!=(p=s.exec(o));){p=p.filter(Boolean);var d={number:parseFloat(p[0].replace(",",".")),unit:""};p.length>=4&&(d.unit=p[3].toLowerCase().replace(/\s/g,"")),l.push(d)}if(l.length>0){var m=l[0];if(l.length>1&&e.each(l,(function(e,t){t.unit.toString().toLowerCase()===c.unit.toString().toLowerCase()&&(m=t)})),m.unit.toString().toLowerCase()===c.unit.toString().toLowerCase()){e(c.input).val(m.number.toString().replace(".",wc_gzdp_admin_products_params.decimal_separator));var v=e(c.input).parents(".form-field").find("label").text();console.log("Detected "+v+" in clipboard = "+m.number),hasReplaced=!0,void 0!==u[r]&&delete u[r]}}}}}))})),hasReplaced)t.preventDefault();else{var c=e(this);setTimeout((function(){c.val((function(){var e=this.value.toString().replace(".",wc_gzdp_admin_products_params.decimal_separator);return(e=e.replace(new RegExp(a,"i"),"")).replace(/\s/g,"")}))}))}},formatPrice:function(e){return t.roundPrice(e).toString().replace(".",",")},roundPrice:function(e){var t=parseInt(2,10),a=Math.pow(10,t),i=parseFloat(e);return(Math.round(Math.round(i*a*10)/10)/a).toFixed(2)},recalculateUnitPrices:function(a){var i=t,n=!1;if(e.each(["input[name=_regular_price], input[name*=variable_regular_price]","input[name=_unit_base]"],(function(t,i){e(a).find(i).removeClass("wc_input_error"),e(a).find(i).val()||e("#general_product_data").find(i).val()||(n=!0,e(a).find(i).addClass("wc_input_error"))})),!n){e(a).find("#_unit_price_regular, input[name*=variable_unit_price_regular]").attr("readonly","readonly"),e(a).find("#_unit_price_sale, input[name*=variable_unit_price_sale]").attr("readonly","readonly");var r=parseFloat(e("#general_product_data input[name=_unit_base]").val().replace(",",".")),u=parseFloat(e(a).find("input[name=_regular_price], input[name*=variable_regular_price]").val().replace(",",".")),c=r;e(a).find("input[name*=variable_unit_product]").val()?c=parseFloat(e(a).find("input[name*=variable_unit_product]").val().replace(",",".")):e("#general_product_data").find("input[name=_unit_product]").val()?c=parseFloat(e("#general_product_data").find("input[name=_unit_product]").val().replace(",",".")):r=1;var _=e(a).find("input[name=_unit_price_regular], input[name*=variable_unit_price_regular]").val(),o=i.formatPrice(u/c*r);if(e(a).find("input[name=_unit_price_regular], input[name*=variable_unit_price_regular]").val(o),_!=o&&e(a).find("input[name=_unit_price_regular], input[name*=variable_unit_price_regular]").trigger("change"),e(a).find("input[name=_sale_price], input[name*=variable_sale_price]").val()){var l=parseFloat(e(a).find("input[name=_sale_price], input[name*=variable_sale_price]").val().replace(",",".")),p=i.formatPrice(l/c*r),s=e(a).find("input[name=_unit_price_sale], input[name*=variable_unit_price_sale]").val();e(a).find("input[name=_unit_price_sale], input[name*=variable_unit_price_sale]").val(p),p!=s&&e(a).find("input[name=_unit_price_sale], input[name*=variable_unit_price_sale]").trigger("change")}else e(a).find("input[name=_unit_price_sale], input[name*=variable_unit_price_sale]").val("")}}};t.init()})),((window.germanizedPro=window.germanizedPro||{}).static=window.germanizedPro.static||{})["admin-products"]={};