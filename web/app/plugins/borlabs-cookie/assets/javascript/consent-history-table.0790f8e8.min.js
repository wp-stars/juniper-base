var x=(N,b,h)=>new Promise((S,H)=>{var T=r=>{try{f(h.next(r))}catch(a){H(a)}},y=r=>{try{f(h.throw(r))}catch(a){H(a)}},f=r=>r.done?S(r.value):Promise.resolve(r.value).then(T,y);f((h=h.apply(N,b)).next())});import{i as D,d as _,g as j,c as G,b as O}from"./init.d0a8a83e.min.js";import{_ as w}from"./observer.472990d3.min.js";import{e as A,a as B,q as F,o as e,f as t,t as o,u as d,s as n,i as p,F as k,C,m as V}from"./vue.a50c3feb.min.js";const R={class:"brlbs-overflow-hidden"},U={key:0,class:"brlbs-text-center brlbs-text-base brlbs-font-bold brlbs-py-4"},q={key:1,tabindex:"0",class:"brlbs-cmpnt-table"},z={class:"brlbs-text-left"},E={class:"brlbs-text-left"},M={class:"brlbs-text-left"},J={key:0},K={colspan:"4",class:"brlbs-text-center"},P={class:"brlbs-font-bold"},Q={key:0},W={key:0},X={class:"brlbs-font-bold"},Y={key:0},Z={key:1},$={class:"brlbs-font-bold"},L={key:0},I={class:"brlbs-text-center"},ee={class:"brlbs-mt-4 brlbs-text-center brlbs-text-xxs"},re=A({__name:"consent-history-table",setup(N){const b=B([]),h=B(!0);F(()=>x(this,null,function*(){b.value=yield D.get(),h.value=!1}));const S=_.consentHistoryTableConsents,H=_.consentHistoryTableDate,T=_.consentHistoryTableVersion;function y(a){var i,l;return(l=(i=G.findByServiceId(a))==null?void 0:i.name)!=null?l:a}function f(a){var i,l;return(l=(i=O.findByServiceGroupId(a))==null?void 0:i.name)!=null?l:a}function r(a){if(a<b.value.length-1){const i=[],l=[],u=b.value[a].consents,c=b.value[a+1].consents;for(const s in u)if(s in c){const v=u[s],m=c[s];for(const g of v)m.includes(g)||i.push(g);for(const g of m)v.includes(g)||l.push(g)}else i.push(...u[s]);for(const s in c)s in u||l.push(...c[s]);return{added:i,removed:l}}else return{added:[],removed:[]}}return(a,i)=>(e(),t("div",R,[h.value?(e(),t("p",U,o(d(_).consentHistoryLoading.value),1)):(e(),t("table",q,[n("tr",null,[n("th",z,o(d(H)),1),n("th",E,o(d(S)),1),n("th",M,o(d(_).consentHistoryTableVersionChanges.value),1),n("th",null,o(d(T)),1)]),b.value.length===0?(e(),t("tr",J,[n("td",K,o(d(_).consentHistoryNoData.value),1)])):p("",!0),(e(!0),t(k,null,C(b.value,(l,u)=>(e(),t("tr",{key:l.stamp},[n("td",null,[n("p",null,o(l.stamp),1)]),n("td",null,[(e(!0),t(k,null,C(l.consents,(c,s)=>(e(),t("div",{key:s},[n("p",null,[n("span",P,o(f(s))+": ",1),(e(!0),t(k,null,C(c,(v,m)=>(e(),t("span",{key:v},[V(o(y(v)),1),m>=0&&m!=Object.keys(c).length-1?(e(),t("span",Q,", ")):p("",!0)]))),128))])]))),128))]),n("td",null,[r(u).added.length>0?(e(),t("div",W,[n("span",X,o(d(_).consentHistoryTableVersionChangesAdded.value)+": ",1),(e(!0),t(k,null,C(r(u).added,(c,s)=>(e(),t("span",{key:c},[V(o(y(c)),1),s>=0&&s!=Object.keys(r(s).added).length-1?(e(),t("span",Y,", ")):p("",!0)]))),128))])):p("",!0),r(u).removed.length>0?(e(),t("div",Z,[n("span",$,o(d(_).consentHistoryTableVersionChangesRemoved.value)+": ",1),(e(!0),t(k,null,C(r(u).removed,(c,s)=>(e(),t("span",{key:c},[V(o(y(c)),1),s>=0&&s!=Object.keys(r(s).removed).length-1?(e(),t("span",L,", ")):p("",!0)]))),128))])):p("",!0)]),n("td",I,[n("p",null,o(l.version),1)])]))),128))])),n("p",ee,o(d(w).dialogUid.value)+": "+o(d(j).pluginCookie.uid.toLocaleUpperCase()),1)]))}});export{re as _};
