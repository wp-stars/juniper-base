var Ke=Object.defineProperty;var Xe=(r,e,t)=>e in r?Ke(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var x=(r,e,t)=>(Xe(r,typeof e!="symbol"?e+"":e,t),t);var L=(r,e,t)=>new Promise((n,s)=>{var o=c=>{try{a(t.next(c))}catch(m){s(m)}},i=c=>{try{a(t.throw(c))}catch(m){s(m)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,i);a((t=t.apply(r,e)).next())});import{u as V,v as je,w as ee,x as Te,y as G,z as ze,A as $,B as H,E as Ae,F as pe,G as We,H as Qe,I as Ye,J as Je,K as Ze,L as et,M as tt,N as nt,O as st,R as B,a as N,P as K,Q as ot,S as rt,T as he,U as ge,V as Ce,W as Se,X as Le,Y as it,Z as Fe,$ as at,a0 as lt,a1 as te,a2 as _e,a3 as ct,a4 as ut,a5 as ye,a6 as Ge,a7 as we,a8 as W,a9 as dt,aa as Et,ab as ft,ac as Ve,ad as bt,ae as ne,af as U,ag as mt,ah as Re,ai as F,aj as Oe,ak as ve,al as X,am as Ie,an as De,ao as Tt,ap as At,aq as pt,ar as ht,as as gt,at as Ct,au as Me,av as se,aw as oe,ax as St,ay as Lt,az as re,aA as ie,aB as ae,aC as ke,aD as _t,aE as yt,q as wt,aF as Rt,aG as $e,aH as le,aI as Ne}from"./observer.472990d3.min.js";import"./vue.a50c3feb.min.js";function w(r,e=500,t=null){return new Promise(n=>{if(!(r instanceof HTMLElement)){n();return}r.style.display="block",r.style.height="0px",r.style.opacity="0",r.style.overflow="hidden";let s=0;function o(i){s||(s=i);let a=i-s;if(!(r instanceof HTMLElement)){n();return}r.style.height=Math.pow(Math.min(a/e,1),2)*r.scrollHeight+"px",r.style.opacity=String(Math.pow(Math.min(a/e,1),2)),a<e?window.requestAnimationFrame(o):(r.style.height="",r.style.overflow="",typeof t=="function"&&t(),n())}window.requestAnimationFrame(o)})}function C(r,e=500,t=null){return new Promise(n=>{if(!(r instanceof HTMLElement)){n();return}r.style.display="block",r.style.overflow="hidden";let s=0;function o(i){s||(s=i);let a=i-s;if(!(r instanceof HTMLElement)){n();return}r.style.height=(1-Math.pow(Math.min(a/e,1),2))*r.scrollHeight+"px",r.style.opacity=String(1-Math.pow(Math.min(a/e,1),2)),a<e?window.requestAnimationFrame(o):(r.style.display="none",typeof t=="function"&&t(),n())}window.requestAnimationFrame(o)})}function Pe(r,e=500){return new Promise(t=>L(this,null,function*(){if(!(r instanceof HTMLElement)){t();return}r.style.display==="block"?(yield C(r,e),t()):(yield w(r,e),t())}))}const Ot="#BorlabsCookie";class vt{register(){const e=document.querySelectorAll(`${Ot} [${V}]`);for(const t of e)t.addEventListener("click",()=>L(this,null,function*(){const n=t.getAttribute(V);if(n===null)return;const s=document.getElementById(n);if(s instanceof HTMLElement)if(yield Pe(s,300),t.getAttribute("aria-expanded")==="true")t.setAttribute("aria-expanded","false");else{t.setAttribute("aria-expanded","true");const o=t.parentNode;o instanceof HTMLElement&&o.getAttribute(je)!==null&&o.querySelectorAll(`[${V}]`).forEach(a=>L(this,null,function*(){if(!t.isEqualNode(a)&&a.getAttribute("aria-expanded")==="true"){const c=a.getAttribute(V);if(c===null)return;const m=document.getElementById(c);if(!(m instanceof HTMLElement))return;yield Pe(m,300),a.setAttribute("aria-expanded","false")}}))}}))}}const It=new vt,Be="#BorlabsCookie";class Dt{register(){document.querySelectorAll(`${Be} [${ee}]`).forEach(s=>{s instanceof HTMLButtonElement&&s.addEventListener("change",function(){this instanceof HTMLSelectElement&&n(this.selectedOptions[0].value,this.getAttribute(ee))})}),document.querySelectorAll(`${Be} [${Te}]`).forEach(s=>{s instanceof HTMLButtonElement&&s.addEventListener("click",function(){const o=document.querySelector("#"+this.getAttribute(Te));o instanceof HTMLSelectElement&&n(o.selectedOptions[0].value,o.getAttribute(ee))})});const n=function(s,o){const i=document.querySelector("#"+o);i instanceof HTMLDivElement&&(i.className="animate__animated animate__"+s,window.setTimeout(()=>{i.className=""},1500))}}}const Mt=new Dt;function kt(r,e,t){let n=r.target;n.matches(e)||(n=n.closest(e)),n!==null&&n.matches(e)&&t(n)}function S(r,e,t,n){const s=document.querySelector(r);s&&s.addEventListener(e,o=>{kt(o,t,n)})}const qe="#BorlabsCookie";class $t{register(){const e=document.querySelectorAll(qe+" [aria-modal]");document.querySelectorAll(`${qe} [${G}]`).forEach(n=>{this.registerButtonEvents(n)}),e.forEach(n=>{this.registerCloseListener(n)})}registerButtonEvents(e){e.addEventListener("click",t=>{t.preventDefault();const n=e.getAttribute(G);if(n===void 0)return;const s=document.getElementById(n);s&&(s.getAttribute("aria-hidden")==="true"?s.setAttribute("aria-hidden","false"):s.setAttribute("aria-hidden","true"))})}registerCloseListener(e){document.addEventListener("keydown",t=>{t.key==="Escape"&&e.setAttribute("aria-hidden","true")})}}const ce=new $t,xe="#BorlabsCookie";class Nt{register(){const e=n=>{if(!(n instanceof HTMLElement))return;const s=document.querySelector(`table[${$}="${n.getAttribute(pe)}"]`);s&&this.addRow(s)};S(xe,"click",`[${pe}]`,e);const t=n=>{var i;const s=n.closest("tr"),o=s==null?void 0:s.closest("table");(i=s==null?void 0:s.parentNode)==null||i.removeChild(s),o&&this.handleEmptyTableMessage(o)};S(xe,"click",`button[${We}][type="button"]`,t)}addRow(e,t){var T;if(!(e instanceof HTMLTableElement))return;const n=e.querySelector("tbody"),s=document.querySelector(`[${ze}="${e.getAttribute($)}"]`),o=document.createElement("tr"),i=document.createElement("table"),a=document.createElement("tbody");if(n===null||s===null)return;i.appendChild(a),a.insertAdjacentHTML("beforeend",s.innerHTML);const c=i.querySelector("tr");if(c===null)return;c.classList.forEach(f=>{o.classList.add(f)}),n.getAttribute(H)===null?n.setAttribute(H,n.querySelectorAll("tr").length.toString()):n.setAttribute(H,(parseInt((T=n.getAttribute(H))!=null?T:"0")+1).toString());const m=n.getAttribute(H);c.querySelectorAll("td").forEach(f=>{const p=document.createElement("td");if(p.innerHTML=f.innerHTML.replaceAll("##LOOP_INDEX##",m.toString()),t!==void 0){for(const l in t)if(Object.prototype.hasOwnProperty.call(t,l)){const d=t[l];p.innerHTML=p.innerHTML.replaceAll(`##${l.toUpperCase()}##`,d)}}else p.innerHTML=p.innerHTML.replace(/##.*?##/g,"");f.classList.forEach(l=>{p.classList.add(l)}),o.appendChild(p)}),n.appendChild(o),o.querySelectorAll(`[${G}]`).forEach(f=>{ce.registerButtonEvents(f)}),ce.registerCloseListener(o.querySelector("[aria-modal]")),e instanceof HTMLTableElement&&this.handleEmptyTableMessage(e)}clearTable(e){const t=e.querySelector("tbody"),n=t.querySelectorAll("tr"),s=t.querySelector(`[${Ae}]`);n.forEach(o=>{o!==s&&o.parentNode.removeChild(o)}),this.handleEmptyTableMessage(e)}handleEmptyTableMessage(e){const t=e.querySelector("tbody"),n=t.querySelectorAll("tr"),s=t.querySelector(`[${Ae}]`);s&&(n.length>1?s.classList.add("bc-hidden"):s.classList.remove("bc-hidden"))}}const R=new Nt,He="#BorlabsCookie";class Pt{constructor(){x(this,"acceptServiceUnblockContent","");x(this,"description","");x(this,"moreInformation","");x(this,"unblockButton","")}register(){const e=document.querySelector(`${He} [${Qe}]`),t=document.querySelector(`${He} [${Ye}]`),n=document.querySelector("#previewHtml + .CodeMirror"),s=document.querySelector(`[${Je}]`),o=document.querySelector("#previewImage");e!==null&&(this.acceptServiceUnblockContent=e.getAttribute(Ze),this.description=e.getAttribute(et),this.moreInformation=e.getAttribute(tt),this.unblockButton=e.getAttribute(nt),s.innerHTML=this.getPreviewImageForPresets(e.value),e.addEventListener("change",()=>{s.innerHTML=this.getPreviewImageForPresets(e.value)}),e&&t&&t.addEventListener("click",i=>{if(i.preventDefault(),n&&"CodeMirror"in n){n.CodeMirror.setValue(this.getCodeForPreset(e.value)),e.value==="preset-c"&&(o.value=e.getAttribute(st));const a=document.querySelector(`table[${$}="languageStrings"]`);R.clearTable(a),R.addRow(a,{key:"acceptServiceUnblockContent",value:this.acceptServiceUnblockContent}),R.addRow(a,{key:"description",value:this.description}),R.addRow(a,{key:"moreInformation",value:this.moreInformation}),R.addRow(a,{key:"unblockButton",value:this.unblockButton})}}))}getPreviewImageForPresets(e){return{"preset-a":`<svg width="200" viewBox="0 0 344 216" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="0.5" y="0.5" width="343" height="215" rx="14.5" fill="#EDEDED" stroke="#D6D6D6"/>
  <rect x="80" y="37" width="184" height="28" rx="5" fill="#B6B6B6"/>
  <rect x="116" y="162" width="111" height="16" rx="5" fill="#B6B6B6"/>
  <rect x="80" y="84" width="184" height="28" rx="5" fill="#0063E3"/>
  <rect x="80" y="121" width="184" height="28" rx="5" fill="#0063E3"/>
  <rect x="80" y="74" width="184" height="1" fill="#D6D6D6"/>
</svg>`,"preset-b":`<svg width="200" viewBox="0 0 344 216" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.5" y="0.5" width="343" height="215" rx="14.5" fill="#2F2F2F" stroke="#D6D6D6"/>
<rect y="51" width="344" height="113" fill="#EDEDED"/>
<rect x="14" y="85" width="159" height="16" rx="5" fill="#B6B6B6"/>
<rect x="14" y="109" width="86" height="11" rx="5" fill="#B6B6B6"/>
<rect x="220" y="85" width="105" height="18" rx="5" fill="#0063E3"/>
<rect x="220" y="115" width="105" height="18" rx="5" fill="#0063E3"/>
</svg>`,"preset-c":`<svg width="200" viewBox="0 0 344 216" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.5" y="0.5" width="343" height="215" rx="14.5" fill="#2F2F2F" stroke="#D6D6D6"/>
<rect x="30" y="40" width="284" height="145" fill="#EDEDED"/>
<rect x="80" y="56" width="184" height="21" rx="5" fill="#B6B6B6"/>
<rect x="116" y="86" width="111" height="16" rx="5" fill="#B6B6B6"/>
<rect x="80" y="114" width="184" height="24" rx="5" fill="#0063E3"/>
<rect x="80" y="147" width="184" height="23" rx="5" fill="#0063E3"/>
<circle cx="172" cy="42" r="19.5" fill="white" stroke="#B6B6B6"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M165.5 35.653C165.5 34.227 167.029 33.323 168.279 34.01L179.819 40.358C181.114 41.07 181.114 42.931 179.819 43.643L168.28 49.991C167.03 50.678 165.501 49.774 165.501 48.348L165.5 35.653Z" fill="black"/>
</svg>`}[e]}getCodeForPreset(e){return{"preset-a":`<div class="brlbs-cmpnt-cb-preset-a">
  <p class="brlbs-cmpnt-cb-description">{{ description }}</p>
  <div class="brlbs-cmpnt-cb-buttons">
    <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-unblock role="button">{{ unblockButton }}</a>
    <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-accept-service role="button" style="display: {{ serviceConsentButtonDisplayValue }}">{{ acceptServiceUnblockContent }}</a>
  </div>
  <a class="brlbs-cmpnt-cb-provider-toggle" href="#" data-borlabs-cookie-show-provider-information role="button">{{ moreInformation }}</a>
</div>`,"preset-b":`<div class="brlbs-cmpnt-cb-preset-b">
  <div class="brlbs-cmpnt-cb-thumbnail" style="background-image: url('{{ previewImage }}')"></div>
  <div class="brlbs-cmpnt-cb-main">
    <div class="brlbs-cmpnt-cb-content">
      <p class="brlbs-cmpnt-cb-description">{{ description }}</p>
      <a class="brlbs-cmpnt-cb-provider-toggle" href="#" data-borlabs-cookie-show-provider-information role="button">{{ moreInformation }}</a>
    </div>
     <div class="brlbs-cmpnt-cb-buttons">
       <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-unblock role="button">{{ unblockButton }}</a>
      <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-accept-service role="button" style="display: {{ serviceConsentButtonDisplayValue }}">{{ acceptServiceUnblockContent }}</a>
     </div>
   </div>
</div>`,"preset-c":`<div class="brlbs-cmpnt-cb-preset-c">
  <div class="brlbs-cmpnt-cb-thumbnail" style="background-image: url('{{ previewImage }}')"></div>
  <div class="brlbs-cmpnt-cb-main">
    <div class="brlbs-cmpnt-cb-play-button"></div>
    <div class="brlbs-cmpnt-cb-content">
      <p class="brlbs-cmpnt-cb-description">{{ description }}</p>
      <a class="brlbs-cmpnt-cb-provider-toggle" href="#" data-borlabs-cookie-show-provider-information role="button">{{ moreInformation }}</a>
    </div>
     <div class="brlbs-cmpnt-cb-buttons">
       <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-unblock role="button">{{ unblockButton }}</a>
      <a class="brlbs-cmpnt-cb-btn" href="#" data-borlabs-cookie-accept-service role="button" style="display: {{ serviceConsentButtonDisplayValue }}">{{ acceptServiceUnblockContent }}</a>
     </div>
   </div>
</div>`}[e]}}const Bt=new Pt;var Q=(r=>(r.SCANNING="scanning",r.ANALYZING="analyzing",r.FINISHED="finished",r))(Q||{});function qt(r){return B("GET","borlabs-cookie/v1/cloud-scan/"+r,null).then(e=>e).catch(e=>{N.error(e)})}const M="#BorlabsCookie";class xt{register(){this.hideOrShowCustomScanPage(),this.initCustomScanPage()}hideOrShowCustomScanPage(){const e=document.querySelector(M+" #selectPageType");e instanceof HTMLSelectElement&&e.addEventListener("change",()=>{this.showCustomScanPageIfCustomIsSelected()})}initCustomScanPage(){const e=window.document.querySelector(`${M} [${K}]`);if(e instanceof HTMLDivElement){const t=e.getAttribute(K);t!==null&&this.scanResults(parseInt(t))}this.showCustomScanPageIfCustomIsSelected()}showCustomScanPageIfCustomIsSelected(){const e=document.querySelector(M+" #selectPageType");if(e instanceof HTMLSelectElement)if(e.value==="custom"){const n=document.querySelector(M+" #customScanPage");n instanceof HTMLDivElement&&n.classList.remove("bc-hidden")}else{const n=document.querySelector(M+" #customScanPage");if(n instanceof HTMLDivElement){n.classList.add("bc-hidden");const s=document.querySelector(M+" #enableCustomScanUrls");s instanceof HTMLInputElement&&s.checked&&s.click()}}}scanResults(e){return L(this,null,function*(){var s;for(var n=120;n>0;n--){let o=yield qt(e),i=window.document.getElementById("borlabs-cookie-cloud-scan-progress-bar");if(o)if(o.status.valueOf()===Q.FINISHED){let a=(s=window.document.querySelector(`[${K}]`))==null?void 0:s.getAttribute(ot);if(a!=null){i!==null&&(i.style.width="100%",yield new Promise(c=>setTimeout(c,1e3))),window.location.href=a;return}else console.log("Reload URL not found.");break}else{let a=o.finishedPagesCount+o.scanningPagesCount+o.failedPagesCount,c=window.document.getElementById("borlabs-cookie-cloud-scan-finished-count");c!==null&&(c.textContent=o.finishedPagesCount.toString());let m=window.document.getElementById("borlabs-cookie-cloud-scan-scanning-count");m!==null&&(m.textContent=o.scanningPagesCount.toString());let T=window.document.getElementById("borlabs-cookie-cloud-scan-failure-count");if(T!==null&&(T.textContent=o.failedPagesCount.toString()),i!==null){let f=Math.round(o.finishedPagesCount/a*100);i.style.width=(f>=90?90:f)+"%"}o.status.valueOf()===Q.ANALYZING&&(Array.from(window.document.getElementsByClassName("borlabs-cookie-cloud-scan-status-scanning")).forEach(f=>{f.classList.add("bc-hidden")}),Array.from(window.document.getElementsByClassName("borlabs-cookie-cloud-scan-status-analysing")).forEach(f=>{f.classList.remove("bc-hidden")}),i!==null&&(i.style.width="95%",yield new Promise(f=>setTimeout(f,1e3)))),o.status.valueOf()===Q.SCANNING&&Array.from(window.document.getElementsByClassName("borlabs-cookie-cloud-scan-status-analysing")).forEach(f=>{f.classList.add("bc-hidden")})}else this.handleScanResultsError();yield new Promise(a=>setTimeout(a,5e3))}this.handleScanResultsError()})}handleScanResultsError(){var t;let e=(t=window.document.querySelector(`${M} [${K}]`))==null?void 0:t.getAttribute(rt);e!=null?window.location.href=e:console.log("Overview redirect URL not found.")}}const Ht=new xt,y="#BorlabsCookie";class Ut{register(){S(y,"click",`button[${G}]`,a=>{const c=document.querySelector(`#${a.getAttribute(G)}`);this.processConsentParameters(c,"purpose","purposes"),this.processConsentParameters(c,"feature","features"),this.processConsentParameters(c,"leg-int-purpose","purposes"),this.processConsentParameters(c,"special-feature","specialFeatures"),this.processConsentParameters(c,"special-purpose","specialPurposes"),this.processConsentParameters(c,"data-category","dataCategories")});const e=document.querySelectorAll(`${y} input[${he}]`),t=document.querySelectorAll(`${y} input[${ge}]`),n=document.querySelectorAll(`${y} input[${Ce}]`),s=document.querySelectorAll(`${y} input[${Se}]`);this.setLabels(e,"purposes"),this.setLabels(t,"features"),this.setLabels(n,"specialFeatures"),this.setLabels(s,"specialPurposes"),S(y,"click",`button[${ct}]`,a=>{this.setVendorPreviewListItems()});const o=document.querySelector(`${y} input[${Le}]`),i=o?o.closest("form"):null;i&&i.addEventListener("submit",a=>L(this,null,function*(){a.target instanceof HTMLFormElement&&this.fillVendorIdsInput()}))}fillVendorIdsInput(){const e=this.getConfiguredVendors(),t=document.querySelector(`${y} input[${Le}]`);t.value=e.ids.join(",")}setVendorPreviewListItems(){return L(this,null,function*(){const e=this.getConfiguredVendors(),t=document.querySelector(`${y} div[${it}]`),n=document.querySelector(`${y} div[${Fe}]`),s=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});if(e.names.sort(s.compare),window.getComputedStyle(t).display!=="none"&&(yield C(t)),window.getComputedStyle(n).display!=="none"&&(yield C(n)),e.names.length){const o=document.querySelector(`${y} ul[${at}]`);o.innerHTML="",e.names.forEach(i=>{let a=document.createElement("li");a.textContent=i,o.appendChild(a)}),yield Promise.all([w(n)])}else yield Promise.all([w(t)])})}getConfiguredVendors(){let e={ids:[],names:[]},t=[];const n=this.getIdsOfConsentParameter(document.querySelectorAll(`input[${he}]:checked`)),s=this.getIdsOfConsentParameter(document.querySelectorAll(`input[${ge}]:checked`)),o=this.getIdsOfConsentParameter(document.querySelectorAll(`input[${Ce}]:checked`)),i=this.getIdsOfConsentParameter(document.querySelectorAll(`input[${Se}]:checked`)),a=document.querySelector(`${y} textarea[${lt}]`);return a&&(t=a.value.split(",").map(c=>parseInt(c.trim())).filter(c=>!isNaN(c))),typeof window.borlabsCookieGlobals.iabTcfVendors!="undefined"&&Object.entries(window.borlabsCookieGlobals.iabTcfVendors).forEach(([c,m])=>{let T=!1;T=n.filter(f=>m.purposes.indexOf(f)!==-1).length>0?!0:T,T=s.filter(f=>m.features.indexOf(f)!==-1).length>0?!0:T,T=o.filter(f=>m.specialFeatures.indexOf(f)!==-1).length>0?!0:T,T=i.filter(f=>m.specialPurposes.indexOf(f)!==-1).length>0?!0:T,T=t.indexOf(m.id)!==-1?!0:T,T&&(e.ids.push(parseInt(c)),e.names.push(m.name))}),e}getIdsOfConsentParameter(e){return Array.from(e).map(t=>t.hasAttribute(`${te}`)?parseInt(t.getAttribute(`${te}`)):null)}setLabels(e,t){e.forEach(n=>{let s=parseInt(n.getAttribute(`${te}`)),o=document.querySelector(`label[for="${n.id}"]`),i=window.borlabsCookieGlobals.iabTcfTranslation[t].list.find(a=>a.id===s);o.innerHTML=i&&i.name?`${i.name} <em>(${s})</em>`:o.innerHTML})}processConsentParameters(e,t,n){e.querySelectorAll(`[${_e}-${t}]`).forEach(s=>{let o=parseInt(s.getAttribute(`${_e}-${t}`)),i=window.borlabsCookieGlobals.iabTcfTranslation[n].list.find(a=>a.id===o);s.innerText=i&&i.name?i.name:s.innerText})}}const Ft=new Ut,Gt=function(r,e,t,n){return r/=n/2,r<1?t/2*r*r+e:(r--,-t/2*(r*(r-2)-1)+e)};function ue(r,e,t){return new Promise(n=>{const s=r.scrollTop,o=e-s,i=20;let a=0;const c=function(){a+=i,r.scrollTop=Gt(a,s,o,t),a<t?setTimeout(c,i):n()};c()})}function Vt(r){return B("GET","borlabs-cookie/v1/helper/permalink/"+r,{}).then(e=>e.permalink)}function Kt(r){return B("POST","borlabs-cookie/v1/package/install/"+r.id,r).then(e=>e).catch(e=>{N.error(e)})}const O="#BorlabsCookie";class Xt{register(){document.querySelectorAll(`${O} [${ut}]`).forEach(l=>{l.addEventListener("click",function(d){d.preventDefault();const u=document.querySelector(`[id="${this.hash.replace("#","")}"]`);u!==null&&ue(document.documentElement,u.getBoundingClientRect().top+window.scrollY-64,1e3)})});const t=function(l){var u;const d=document.querySelector("#"+l.getAttribute(F));if(d&&(l.classList.contains("active")?(d.value="0",l.classList.remove("active"),l.setAttribute("aria-pressed","false"),l.setAttribute("aria-checked","false")):(d.value="1",l.classList.add("active"),l.setAttribute("aria-pressed","true"),l.setAttribute("aria-checked","true"))),l.getAttribute(Ie)!==null){const b=(u=l.getAttribute(Ie))==null?void 0:u.split(",");let A=!0;(!l.classList.contains("active")&&l.getAttribute(De)==="true"||l.classList.contains("active")&&l.getAttribute(De)==="false")&&(A=!1),b==null||b.forEach(h=>{const E=document.querySelector("#"+h);E&&(E.disabled=A)})}};S(O,"click",`[${F}]`,t);const n=function(l){const d=document.querySelector("#"+l.getAttribute(Oe));if(d instanceof HTMLButtonElement||d instanceof HTMLInputElement||d instanceof HTMLSelectElement||d instanceof HTMLTextAreaElement){const u=l;d.disabled=u.checked}};S(O,"click",`[${Oe}]`,n);const s=function(l){const d=document.querySelector("#"+l.getAttribute(ve));if(d instanceof HTMLButtonElement||d instanceof HTMLInputElement||d instanceof HTMLSelectElement||d instanceof HTMLTextAreaElement){const u=l;d.disabled=!u.checked}};S(O,"click",`[${ve}]`,s);const o=function(l){const d=document.querySelector("#"+l.getAttribute(X));let u=!1;if(!(l instanceof HTMLSelectElement)){if(l instanceof HTMLButtonElement){const b=document.querySelector("#"+l.getAttribute(F));b&&(u=parseInt(b.value)>0)}else l instanceof HTMLInputElement&&(u=l.checked);d&&(d.style.display=u?"block":"none")}};S(O,"click",`[${X}]`,o);const i=function(l){var b;const d=document.querySelector("#"+l.getAttribute(X));let u=!1;if(l instanceof HTMLSelectElement){if(l instanceof HTMLSelectElement){const A=(b=l.getAttribute(Tt))==null?void 0:b.split(","),h=Array.from(l.selectedOptions).map(E=>E.value);u=!!A.find(E=>h.includes(E))}d&&(d.style.display=u?"block":"none")}};S(O,"change",`[${X}]`,i),document.querySelectorAll(`${O} [${ye}]`).forEach(l=>{l.addEventListener("click",function(d){d.preventDefault();const u=document.querySelector("#"+this.getAttribute(Ge));u instanceof HTMLDivElement&&(u.innerHTML="");const b=document.querySelector("#"+this.getAttribute(ye));b instanceof HTMLInputElement&&(b.value="")})}),document.querySelectorAll(`${O} [${we}]`).forEach(l=>{l.addEventListener("click",function(d){return L(this,null,function*(){const u=document.querySelector("#"+this.getAttribute(we));if(u instanceof HTMLSelectElement){this.setAttribute(W,"true");const b=parseInt(u.selectedOptions[0].value);if(b>0){const A=yield Vt(b);if(typeof A=="string"&&A.length>0){const h=document.querySelector("#"+this.getAttribute(dt));h instanceof HTMLTextAreaElement&&(h.value+=(h.value.length?`
`:"")+A)}}delete this.removeAttribute(W)}})})}),document.querySelectorAll(`${O} [${Et}]`).forEach(l=>{l.addEventListener("submit",function(d){return L(this,null,function*(){if(d.stopPropagation(),d.preventDefault(),!l.checkValidity())return;const u=d.target;if(!(u instanceof HTMLFormElement))return;const b=u.querySelector(`[${ft}]`),A=u.querySelector(`[${W}]`),h=u.querySelector(`[${Ve}]`),E=u.querySelector(`[${Fe}]`);if(!(b instanceof HTMLElement)||!(A instanceof HTMLElement)||!(h instanceof HTMLElement)||!(E instanceof HTMLElement)||(yield C(b),yield w(A),!(u.querySelector('[name="id"]')instanceof HTMLInputElement)))return;const Y=new FormData(u),de={};Y.forEach((D,J)=>{de[J]=D});const I=yield Kt(de);if(!I||Array.isArray(I.list)&&I.list.length===0){yield C(A),yield w(h);return}function Ee(D,J,fe){for(const v of J.list){const q=document.createElement("tr");q.classList.add("brlbs-cmpnt-level-"+fe);const be=document.createElement("td"),me=document.createElement("td"),Z=document.createElement("td");be.classList.add("brlbs-cmpnt-status-"+v.status),me.textContent=typeof window.borlabsCookieGlobals.componentTypes[v.componentType]!==null?window.borlabsCookieGlobals.componentTypes[v.componentType]:v.componentType,Z.innerHTML=v.name,v.failureMessage!==""&&(Z.innerHTML+=`<div class="brlbs-cmpnt-alert brlbs-cmpnt-alert-error" role="alert">${v.failureMessage}</div>`),q.appendChild(be),q.appendChild(me),q.appendChild(Z),D.appendChild(q),v.subComponentsInstallationStatus&&Ee(D,v.subComponentsInstallationStatus,fe+1)}}if(I&&Array.isArray(I.list)&&I.list.length>0){const D=u.querySelector(`[${bt}]`);D instanceof HTMLTableSectionElement&&Ee(D,I,0)}yield C(A),yield w(E)})})});const T=(l,d)=>{l.preventDefault();const u=d.querySelector(`[${U}="dragging"]`);if(u===null)return;let A=[...d.querySelectorAll(`[${U}=""]`)].find(h=>{let E=h.getBoundingClientRect();return l.clientY<=E.top+h.offsetHeight/2});A?d.insertBefore(u,A):d.appendChild(u)},f=l=>{const d=document.querySelector(`[${ne}="${l}"]`),u=document.querySelector(`input[${mt}="${l}"]`);d===null||u===null||(u.value=JSON.stringify([...d.querySelectorAll(`[${Re}]`)].map(b=>b.getAttribute(Re))))};document.querySelectorAll(O+` [${ne}]`).forEach(l=>{l.querySelectorAll(`[${U}]`).forEach(u=>{u.addEventListener("dragstart",()=>{u.setAttribute(U,"dragging")}),u.addEventListener("dragend",()=>{u.setAttribute(U,""),f(l.getAttribute(ne))})}),l.addEventListener("dragover",u=>T(u,l)),l.addEventListener("dragenter",u=>u.preventDefault())})}}const jt=new Xt;var P=(r=>(r.CORE="core",r.EXTERNAL="external",r.OTHER="other",r.PLUGIN="plugin",r.THEME="theme",r))(P||{});function zt(r){return B("GET","borlabs-cookie/v1/scan-result/"+r,null).then(e=>e).catch(e=>{N.error(e)})}function Wt(r){return B("POST","borlabs-cookie/v1/scan-request/",r).then(e=>e).catch(e=>{N.error(e)})}function Qt(r){return B("POST","borlabs-cookie/v1/scan/",{signedUrl:r}).then(e=>e).catch(e=>{N.error(e)})}const _="#BorlabsCookie";class Yt{register(){const e=document.querySelector(`${_} [${At}]`);e instanceof HTMLButtonElement&&"handleTypes"in window.borlabsCookieGlobals&&"scanResultTables"in window.borlabsCookieGlobals&&"scanResultTables"in window.borlabsCookieGlobals&&e.addEventListener("click",t=>L(this,null,function*(){if(t.preventDefault(),!(t.target instanceof HTMLButtonElement))return;const n=t.target.closest("form"),s=n.querySelector(`div[${Ve}]`),o=n.querySelector(`div[${pt}]`),i=o.querySelector(`div[${W}]`),a=document.querySelector(`${_} [${ht}]`),c=o.querySelector(`div[${gt}]`),m=o.querySelector(`script[${Ct}]`),T=document.querySelector(`${_} [${Me}]`),f=document.querySelectorAll(`${_} [${se}]`),p={matchedHandles:document.querySelector(`${_} [${$}="${window.borlabsCookieGlobals.scanResultTables.matchedHandles}"]`),matchedTags:document.querySelector(`${_} [${$}="${window.borlabsCookieGlobals.scanResultTables.matchedTags}"]`),unmatchedHandles:document.querySelector(`${_} [${$}="${window.borlabsCookieGlobals.scanResultTables.unmatchedHandles}"]`),unmatchedTags:document.querySelector(`${_} [${$}="${window.borlabsCookieGlobals.scanResultTables.unmatchedTags}"]`)};for(const E in p)p.hasOwnProperty(E)&&R.clearTable(p[E]);if(f.length<=0)return;let l="";for(const E of f)E instanceof HTMLInputElement&&!E.disabled&&(l=E.value),E instanceof HTMLSelectElement&&!E.disabled&&(l=E.options[E.selectedIndex].value);if(!this.isPageSelectionValid()||!this.isCustomUrlValid()||!this.isSearchPhraseValid())return;t.target.disabled=!0,window.getComputedStyle(o).display!=="none"?(yield C(o),yield Promise.all([C(i),C(s)]),yield this.showProgressElements(o,i)):yield this.showProgressElements(o,i);const d=yield Wt({searchPhrase:T.value,scanRequestOption:window.borlabsCookieGlobals.scanRequestOption,url:l});if(typeof d=="undefined"){t.target.disabled=!1,yield Promise.all([C(i),w(s)]);return}const u=a.options[a.selectedIndex].value;if(u==="manual")c.innerHTML=m.innerHTML.replace("##SIGNED_URL##",d.signedUrl),yield w(c);else if(u==="current-user")this.performScanAsCurrentUserForUrl(d.signedUrl);else if(u==="guest"){const E=yield Qt(d.signedUrl);if(typeof E!="undefined"&&typeof E.success!="undefined"&&E.success===!1){t.target.disabled=!1,yield Promise.all([C(i),w(s)]),N.error(E.messageCode);return}}const b=yield this.waitForScanResult(d.scanRequestId);t.target.disabled=!1,yield Promise.all([C(o),C(i)]),yield Promise.all([C(s),C(c)]);const A=(E,g)=>E.filter(Y=>Y.type===g),h=[P.EXTERNAL,P.CORE,P.THEME,P.PLUGIN,P.OTHER];b.matchedHandles.list.length&&h.forEach(E=>{A(b.matchedHandles.list,E).forEach(g=>{R.addRow(p.matchedHandles,{handle:g.handle,phrase:g.phrase,type:window.borlabsCookieGlobals.handleTypes[g.type]!==null?window.borlabsCookieGlobals.handleTypes[g.type]:g.type,url:g.url})})}),b.matchedTags.list.length&&b.matchedTags.list.forEach(E=>{R.addRow(p.matchedTags,{phrase:E.phrase,tag:E.tag})}),b.unmatchedHandles.list.length&&h.forEach(E=>{A(b.unmatchedHandles.list,E).forEach(g=>{R.addRow(p.unmatchedHandles,{handle:g.handle,phrase:"",type:window.borlabsCookieGlobals.handleTypes[g.type]!==null?window.borlabsCookieGlobals.handleTypes[g.type]:g.type,url:g.url})})}),b.unmatchedTags.list.length&&b.unmatchedTags.list.forEach(E=>{R.addRow(p.unmatchedTags,{phrase:"",tag:E.tag})})})),S(_,"input",`input[${oe}]`,t=>{const n=document.querySelector(`#${t.getAttribute(oe)}`);this.validatePhraseInput(t,n)}),S(_,"input",`input[${St}]`,t=>{t.reportValidity()})}waitForScanResult(e){return L(this,null,function*(){let t;for(;!t;)t=yield zt(e),yield new Promise(n=>setTimeout(n,2500));return t})}isPageSelectionValid(){const e=document.querySelector(`${_} select[${se}]`);return e.classList.remove("!bc-border-red-500","!bc-text-red-600","!focus:bc-border-red-500","!bc-ring-red-500"),e.disabled?!0:e.options[e.selectedIndex].value==="0"?(e.classList.add("!bc-border-red-500","!bc-text-red-600","!focus:bc-border-red-500","!bc-ring-red-500"),!1):!0}isCustomUrlValid(){const e=document.querySelector(`${_} input[${se}]`),t=e.closest("form");return e.disabled?!0:e.value===""?(e.required=!0,e.reportValidity(),t.classList.add("bc-was-validated"),!1):(e.required=!1,!0)}isSearchPhraseValid(){const e=document.querySelector(`${_} [${Me}]`),t=e.closest("form");return e.value.length<3?(e.required=!0,e.reportValidity(),t.classList.add("bc-was-validated"),!1):(e.required=!1,!0)}performScanAsCurrentUserForUrl(e){const t=document.createElement("iframe");t.setAttribute("sandbox",""),t.src=e,t.style.display="none",t.addEventListener("load",()=>{setTimeout(()=>{t.remove()},0)}),document.body.appendChild(t)}showProgressElements(e,t){return L(this,null,function*(){yield w(e,500),yield w(t,500),yield ue(document.documentElement,e.offsetTop-e.offsetHeight,1e3)})}validatePhraseInput(e,t){const n=e.value,s=t.value;if(this.matchesInput(s,n)){e.setCustomValidity("");const i=document.querySelectorAll(`input[${oe}]:enabled`);let a=!1;i.forEach(c=>{c!==e&&n.length>0&&c.value.length>0&&(c.value.indexOf(n)>=0||n.indexOf(c.value)>=0)&&(a=!0)}),a?e.setCustomValidity(window.borlabsCookieGlobals.scanResultValidationMessages.phraseIsNotUnique):e.setCustomValidity("")}else e.setCustomValidity(window.borlabsCookieGlobals.scanResultValidationMessages.phraseDoesNotMatch);e.reportValidity();const o=e.closest("form");o.checkValidity(),o.classList.add("bc-was-validated")}matchesInput(e,t){try{return new RegExp(t).test(e)}catch(n){return e.includes(t)}}}const Jt=new Yt,Zt="#BorlabsCookie";class en{register(){const e=document.querySelectorAll(Zt+" .needs-validation");Array.from(e).forEach(t=>{t.addEventListener("submit",n=>{if(!t.checkValidity()){n.preventDefault(),n.stopPropagation();const s=document.querySelectorAll(":invalid")[1];typeof s!="undefined"&&ue(document.documentElement,s.getBoundingClientRect().top+window.scrollY-64,1e3)}t.classList.add("was-validated")},!1)})}}const tn=new en,nn="#BorlabsCookie";class sn{register(){document.querySelectorAll(`${nn} [${Lt}]`).forEach(t=>{t.addEventListener("change",function(n){return L(this,null,function*(){const s=this.options[this.selectedIndex].value;let o=new URL(location.href);o.searchParams.set("borlabs-cookie-language",s),location.href=o.href})})})}}const on=new sn;class rn{register(){const e=jQuery("#geoIpCountriesWithHiddenDialog");e.multiSelect({selectableOptgroup:!0,selectableHeader:'<div class="pb-1 text-bold bg-light">'+e.data("brlbsLocalizationHidelistHeader")+"</div>",selectionHeader:'<div class="pb-1 text-bold bg-light">'+e.data("brlbsLocalizationShowlistHeader")+"</div>"})}}const an=new rn,ln="#BorlabsCookie";class cn{toggleDropdown(e){e.classList.toggle("bc-bg-gray-100"),this.getTargetDropdownElement(e).classList.toggle("bc-hidden"),e.getAttribute("aria-expanded")==="true"?e.setAttribute("aria-expanded","false"):e.setAttribute("aria-expanded","true")}register(){const e=document.querySelectorAll(ln+" #primary-navigation [aria-controls]");for(const n of e)n.addEventListener("click",function(s){k.toggleDropdown(n)});document.addEventListener("click",function(n){for(const s of e){const o=k.getTargetDropdownElement(s);s.getAttribute("aria-expanded")==="true"&&s!==n.target&&n.target instanceof Node&&!s.contains(n.target)&&!o.contains(n.target)&&k.toggleDropdown(s)}}),document.addEventListener("keydown",function(n){if(n.key==="Escape")for(const s of e)k.getTargetDropdownElement(s),s.getAttribute("aria-expanded")==="true"&&k.toggleDropdown(s)});const t=document.querySelector('[aria-controls="primary-navigation"]');t.addEventListener("click",n=>{k.toggleDropdown(t)})}getTargetDropdownElement(e){const t=e.getAttribute("aria-controls");return document.getElementById(t)}}const k=new cn,Ue="#BorlabsCookie";class un{register(){document.querySelectorAll(`${Ue} [${re}]`).forEach(n=>{this.handleBlurerEvent(n)});const t=n=>{!(n instanceof HTMLButtonElement)&&!(n instanceof HTMLInputElement)||this.handleBlurerEvent(n)};S(Ue,"click",`[${re}]`,t)}handleBlurerEvent(e){let t;e instanceof HTMLButtonElement?t=document.querySelector("#"+e.getAttribute(F)):t=e;const n=document.querySelector("#"+e.getAttribute(re));t instanceof HTMLInputElement&&n instanceof HTMLElement&&(t.type==="checkbox"&&!t.checked||t.type!=="checkbox"&&t.value==="1"?(n.querySelectorAll("input, select, textarea").forEach(s=>{s.getAttribute(ie)===null?s.disabled=!1:s.removeAttribute(ie)}),n.classList.remove("brlbs-cmpnt-blured")):(n.classList.add("brlbs-cmpnt-blured"),n.querySelectorAll("input, select, textarea").forEach(s=>{s.disabled&&s.setAttribute(ie,"1"),s.disabled=!0})))}}const dn=new un,En="#BorlabsCookie";class fn{register(){const e=function(t){const n=document.querySelector("#"+t.getAttribute(ae));let s="";if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement){const o=document.querySelector("#"+t.getAttribute(ae)+" + .CodeMirror");o&&"CodeMirror"in o?s=o.CodeMirror.getValue():s=n.value,t.classList.add("bc-animate-copied")}else s=t.innerText;navigator.clipboard.writeText(s),window.setTimeout(()=>{t.classList.remove("bc-animate-copied")},1e3)};S(En,"click",`[${ae}]`,e)}}const bn=new fn,j="#BorlabsCookie";class mn{register(){jQuery(j+" .color-field").wpColorPicker();let e;jQuery(`${j} [${ke}]`).on("click",function(n){n.preventDefault(),e&&e.off("select"),e=wp.media({title:this.getAttribute(_t),button:{text:this.getAttribute(yt)},library:{type:["image"]},multiple:!1}),e.on("select",()=>{const s=e.state().get("selection").first().toJSON();jQuery("#"+this.getAttribute(Ge)).html("<img src='"+s.url+`' alt="">`),jQuery("#"+this.getAttribute(ke)).val(s.url)}),e.open()}),[{selector:"textarea[data-brlbs-editor-css]",initMethod:this.initializeCodeMirrorCssEditor},{selector:"textarea[data-brlbs-editor-html]",initMethod:this.initializeCodeMirrorHtmlEditor},{selector:"textarea[data-brlbs-editor-javascript]",initMethod:this.initializeCodeMirrorJavaScriptEditor}].forEach(n=>{document.querySelectorAll(`${j} ${n.selector}`).forEach(s=>{n.initMethod.call(this,s)}),wt(j,n.selector,s=>{n.initMethod.call(this,s)})})}initializeCodeMirrorCssEditor(e){wp.codeEditor.initialize(e.id,window.borlabsCookieGlobals.codeMirrorCss)}initializeCodeMirrorHtmlEditor(e){wp.codeEditor.initialize(e.id,window.borlabsCookieGlobals.codeMirrorHtml)}initializeCodeMirrorJavaScriptEditor(e){wp.codeEditor.initialize(e.id,window.borlabsCookieGlobals.codeMirrorJavaScript)}}const Tn=new mn,z="#BorlabsCookie";class An{register(){const e=function(t){let n={};document.querySelectorAll(`${z} [${le}]`).forEach(s=>{const o=document.querySelector("#"+s.getAttribute(F)),i=s.getAttribute(le),a=s.getAttribute(Ne),c=document.querySelector(`${z} #${s.getAttribute(Ne)}`);document.querySelector(`#${i} + .CodeMirror`).CodeMirror.setValue(""),o.value!=="0"&&(i===null||c===null||(n[i]=n[i]||{},n[i][a]=c.value))}),Object.entries(n).forEach(([s,o])=>{const i=document.querySelector(`#${s} + .CodeMirror`);i&&"CodeMirror"in i&&i.CodeMirror.setValue(JSON.stringify(o))})};S(z,"click",`[${le}]`,e),document.querySelectorAll(`[${Rt}] + .CodeMirror`).forEach(t=>{t.CodeMirror.on("inputRead",n=>{const s=n.getValue();let o={};try{o=JSON.parse(s)}catch(a){}const i=Object.keys(o);document.querySelectorAll(`${z} [${$e}]`).forEach(a=>{const c=a.getAttribute($e);i.indexOf(c)!==-1?a.classList.remove("bc-hidden"):a.classList.add("bc-hidden")})})})}}const pn=new An,hn={Log:N};window.BorlabsCookieAdmin=hn;document.addEventListener("DOMContentLoaded",()=>{It.register(),Mt.register(),Ht.register(),jt.register(),Ft.register(),Jt.register(),tn.register(),on.register(),ce.register(),an.register(),k.register(),dn.register(),bn.register(),R.register(),Tn.register(),Bt.register(),pn.register()});
