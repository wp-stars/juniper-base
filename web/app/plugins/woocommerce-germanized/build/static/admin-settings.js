!function(){var e,t;window.germanized=window.germanized||{},e=jQuery,(t=window.germanized).settings={params:{},init:function(){var t=this;this.params=wc_gzd_admin_settings_params;try{e(document.body).on("wc-enhanced-select-init wc-gzd-enhanced-select-init",this.onEnhancedSelectInit).trigger("wc-gzd-enhanced-select-init")}catch(e){window.console.log(e)}e(document).on("change","input[name=woocommerce_gzd_dispute_resolution_type]",this.onChangeDisputeResolutionType).on("change",".wc-gzd-setting-tabs input.woocommerce-gzd-tab-status-checkbox",this.onChangeTabStatus).on("change",".wc-gzd-setting-tab-enabled :input",this.preventWarning).on("click","a.wc-gzd-install-extension-btn",this.onInstallExtension).on("change gzd_show_or_hide_fields",".wc-gzd-admin-settings :input",this.onChangeInput),e(".wc-gzd-admin-settings :input").trigger("gzd_show_or_hide_fields"),e("input[name=woocommerce_gzd_dispute_resolution_type]:checked").trigger("change"),this.initMailSortable(),e(document.body).on("init_tooltips",(function(){t.initTipTips()})),t.initTipTip()},preventWarning:function(){window.onbeforeunload=""},initTipTip:function(){e(".wc-gzd-setting-tab-actions a.button").tipTip({fadeIn:50,fadeOut:50,delay:200})},onInstallExtension:function(){var n=t.settings,a=e(this),i={action:"woocommerce_gzd_install_extension",security:n.params.install_extension_nonce,extension:a.data("extension")};return a.addClass("wc-gzd-is-loading"),a.append('<span class="spinner is-active"></span>'),e.ajax({url:n.params.ajax_url,data:i,dataType:"json",type:"POST",success:function(t){if(a.find(".spinner").remove(),a.removeClass("wc-gzd-is-loading"),t.success)a.is("[href]")&&"#"!==a.attr("href")&&(window.location.href=a.attr("href"));else if(t.hasOwnProperty("message")){var n=e("#wpbody-content").find(".wrap");e(".wc-gzd-setting-tabs").length>0&&(n=e(".wc-gzd-setting-tabs")),n.before('<div class="error inline" id="message"><p>'+t.message+"</p></div>"),e("html, body").animate({scrollTop:e("#message").offset().top-32},1e3)}}}),!1},onChangeTabStatus:function(){var n=e(this),a=t.settings,i=n.data("tab"),o=n.parents("td").find(".woocommerce-gzd-input-toggle"),s=o.parents("a"),r=n.is(":checked")?"yes":"no",c={action:"woocommerce_gzd_toggle_tab_enabled",security:a.params.tab_toggle_nonce,enable:r,tab:i};return o.addClass("woocommerce-input-toggle--loading"),e.ajax({url:a.params.ajax_url,data:c,dataType:"json",type:"POST",success:function(t){!0===t.data?(o.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),o.addClass("woocommerce-input-toggle--enabled"),o.removeClass("woocommerce-input-toggle--loading"),t.hasOwnProperty("message")&&t.message.length>0&&(e(".wc-gzd-setting-tabs").before('<div class="error inline" id="message"><p>'+t.message+"</p></div>"),e("html, body").animate({scrollTop:e("#message").offset().top-32},1e3))):!1===t.data?(o.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),o.addClass("woocommerce-input-toggle--disabled"),o.removeClass("woocommerce-input-toggle--loading")):"needs_setup"===t.data&&(window.location.href=s.attr("href"))}}),!1},onChangeInput:function(){var n,a,i,o,s,r,c,d,l,g=t.settings,m=e(this),h=m.attr("id")?m.attr("id"):m.attr("name"),p=e(".wc-gzd-admin-settings :input[data-show_if_"+e.escapeSelector(h)+"]");e.each(p,(function(){for(var t in n=e(this),a=n.parents("tr"),i=n.data(),o=!0,i)if(i.hasOwnProperty(t)&&"show_if_"===t.substring(0,8)&&(s=t.replace("show_if_",""),r=g.getInputByIdOrName(s),c=n.data(t)?n.data(t).split(","):[],r.length>0&&(d=r.val(),l=!1,r.is(":radio")?"no"!==(d=r.parents("fieldset").find(":checked").length>0?r.parents("fieldset").find(":checked").val():"no")&&(l=!0):r.is(":checkbox")?"yes"==(d=r.is(":checked")?"yes":"no")&&(l=!0):l=void 0!==d&&"0"!==d&&""!==d,c&&c.length>0?-1===e.inArray(d,c)&&(o=!1):l||(o=!1)),!o))break;a.removeClass("wc-gzd-setting-visible wc-gzd-setting-invisible"),o?a.addClass("wc-gzd-setting-visible"):a.addClass("wc-gzd-setting-invisible")}))},getInputByIdOrName:function(n){var a=t.settings;return n=a.getCleanDataId(n),e(".wc-gzd-admin-settings :input").filter((function(){var t=e(this).attr("id")?e(this).attr("id"):e(this).attr("name");return!!t&&a.getCleanDataId(t)===n}))},getCleanDataId:function(e){return e.toLowerCase().replace(/-/g,"")},onEnhancedSelectInit:function(){var n=t.settings;e(":input.wc-gzd-enhanced-tags").filter(":not(.enhanced)").each((function(){var t={minimumResultsForSearch:10,allowClear:!!e(this).data("allow_clear"),placeholder:e(this).data("placeholder"),tags:!0};e(this).selectWoo(t).addClass("enhanced")})),e(":input.gzd-select-term").filter(":not(.enhanced)").each((function(){!function(t,n){e(t).selectWoo(n).addClass("enhanced"),e(t).prop("multiple")&&e(t).on("change",(function(){var n=e(t).children();n.sort((function(e,t){var n=e.text.toLowerCase(),a=t.text.toLowerCase();return n>a?1:n<a?-1:0})),e(t).html(n)}))}(this,{allowClear:!!e(this).data("allow_clear"),placeholder:e(this).data("placeholder"),minimumInputLength:e(this).data("minimum_input_length")?e(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:n.params.ajax_url,dataType:"json",delay:250,data:function(t){return{term:t.term,action:e(this).data("action")||"woocommerce_json_search_taxonomy_terms",security:n.params.search_term_nonce,exclude:e(this).data("exclude"),taxonomy:e(this).data("taxonomy"),limit:e(this).data("limit")}},processResults:function(t){var n=[];return t&&!t.error&&e.each(t,(function(e,t){n.push({id:t.term_id,text:t.name})})),{results:n}},cache:!0}})}))},onParcelDeliveryShowSpecial:function(){"shipping_methods"===e(this).val()?e("select#woocommerce_gzd_checkboxes_parcel_delivery_show_shipping_methods").parents("tr").show():e("select#woocommerce_gzd_checkboxes_parcel_delivery_show_shipping_methods").parents("tr").hide()},onChangeDisputeResolutionType:function(){var t=e(this).val();e("#woocommerce_gzd_alternative_complaints_text_"+t),e("[id^=woocommerce_gzd_alternative_complaints_text_]").parents("tr").hide(),e("#woocommerce_gzd_alternative_complaints_text_"+t).parents("tr").show()},initMailSortable:function(){if(e("#woocommerce_gzd_mail_attach_imprint").length>0){var t=e("#woocommerce_gzd_mail_attach_imprint").parents("table");e(t).find("tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td, th",scrollSensitivity:40,helper:function(e,t){return t.children().each((function(){jQuery(this).width(jQuery(this).width())})),t.css("left","0"),t},start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(n,a){a.item.removeAttr("style");var i=[];e(t).find("tr select").each((function(){i.push(e(this).attr("id").replace("woocommerce_gzd_mail_attach_",""))})),e("#woocommerce_gzd_mail_attach_order").val(i.join())}})}}},e(document).ready((function(){t.settings.init()})),((window.germanized=window.germanized||{}).static=window.germanized.static||{})["admin-settings"]={}}();