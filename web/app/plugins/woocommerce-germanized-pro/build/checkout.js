!function(){var e={88:function(){},312:function(){},132:function(){}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,o),r.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};!function(){"use strict";o.r(s);var e=window.React,t=window.wp.element,n=function(e){let{icon:o,size:s=24,...n}=e;return(0,t.cloneElement)(o,{width:s,height:s,...n})},r=window.wp.primitives,a=(0,t.createElement)(r.SVG,{xmlns:"https://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(r.Path,{d:"M12 9c-.8 0-1.5.7-1.5 1.5S11.2 12 12 12s1.5-.7 1.5-1.5S12.8 9 12 9zm0-5c-3.6 0-6.5 2.8-6.5 6.2 0 .8.3 1.8.9 3.1.5 1.1 1.2 2.3 2 3.6.7 1 3 3.8 3.2 3.9l.4.5.4-.5c.2-.2 2.6-2.9 3.2-3.9.8-1.2 1.5-2.5 2-3.6.6-1.3.9-2.3.9-3.1C18.5 6.8 15.6 4 12 4zm4.3 8.7c-.5 1-1.1 2.2-1.9 3.4-.5.7-1.7 2.2-2.4 3-.7-.8-1.9-2.3-2.4-3-.8-1.2-1.4-2.3-1.9-3.3-.6-1.4-.7-2.2-.7-2.5 0-2.6 2.2-4.7 5-4.7s5 2.1 5 4.7c0 .2-.1 1-.7 2.4z"})),i=window.wp.blocks,c=window.wp.i18n,d=window.wp.blockEditor,l=(o(132),window.wc.blocksCheckout),p=window.wcGzdPro.blocks.wcGzdpBlocksSettings,m=window.wp.data,u=window.wc.wcBlocksData,w=window.wp.apiFetch,g=o.n(w);const y=(e,t)=>{const o=(0,p.getSetting)("postcodeVatExempts");let s=!1;return o.hasOwnProperty(e)?o[e].forEach((e=>{new RegExp("^"+e.replace("*","(.*)")).test(t)&&(s=!0)})):"GB"===e&&(s=!0,/^BT(.*)/.test(t)&&(s=!1)),s},f=e=>{const t=(0,p.getSetting)("countryData",{})[e];return t&&t.locale&&t.locale.hasOwnProperty("vat_id")?t.locale.vat_id:null},b=(e,t)=>{const o=f(e);let s=!1;return o&&(s=!o.hidden&&o.required),y(e,t)&&(s=!1),s},h=({checkoutExtensionData:o,extensions:s,cart:n,addressType:r,isEditor:a=!1})=>{const i=s.hasOwnProperty("woocommerce-germanized-pro")?s["woocommerce-germanized-pro"]:{},d=i.hasOwnProperty(`${r}_vat_id`)?i[`${r}_vat_id`]:"",p="shipping"===r?n.shippingAddress:n.billingAddress,w=p.country,h=p.postcode,[v,E]=(0,t.useState)(d),[_,k]=(0,t.useState)(!1),[A,S]=(0,t.useState)(w),{setExtensionData:D,extensionData:T}=o,{setValidationErrors:z,clearValidationError:C}=(0,m.useDispatch)(u.VALIDATION_STORE_KEY),O=`${r}_vat_id`,N=!!a||((e,t,o)=>{const s=f(e),n=(0,m.useSelect)((e=>e(u.VALIDATION_STORE_KEY).getValidationError(`${o}_postcode`)));return!(s&&s.hidden||y(e,t)||!t||n)})(w,h,r),x=n.cartNeedsShipping?"shipping"===r:"billing"===r,{useShippingAsBilling:B}=(0,m.useSelect)((e=>({useShippingAsBilling:e(u.CHECKOUT_STORE_KEY).getUseShippingAsBilling()})));(0,t.useEffect)((()=>{if(B)D("woocommerce-germanized-pro","billing_vat_id",""),n.cartNeedsShipping||(0,l.extensionCartUpdate)({namespace:"woocommerce-germanized-pro-vat-id",data:{vat_id:"",address_type:"billing"}});else if("billing"===r){const e=T.hasOwnProperty("woocommerce-germanized-pro")?T["woocommerce-germanized-pro"]:{},t=e.hasOwnProperty("shipping_vat_id")?e.shipping_vat_id:"";t&&P(t)}}),[B,r]),(0,m.useSelect)((e=>e(u.VALIDATION_STORE_KEY).getValidationError(O)));const{isCustomerDataUpdating:V}=(0,m.useSelect)((e=>({isCustomerDataUpdating:e(u.CART_STORE_KEY).isCustomerDataUpdating()})));(0,t.useEffect)((()=>{D("woocommerce-germanized-pro",`${r}_vat_id`,v)}),[v]),(0,t.useEffect)((()=>{!N||p.country!==A&&!V?(S(p.country),E("")):v&&R.current?.revalidate()}),[p.postcode,p.city,p.company,p.country,E,N,S]);const P=(0,t.useCallback)((e=>{if(E(e),!(0,m.select)(u.VALIDATION_STORE_KEY).getValidationError(O)&&!V){k(!0);const t={vat_id:e,postcode:p.postcode,city:p.city,country:p.country,company:p.company,address_type:r};g()({path:"/wc/store/v1/cart/update-vat-id",method:"POST",data:t,cache:"no-store",parse:!1}).then((t=>{g().setNonce(t.headers),t.json().then((function(o){t.ok?C(O):o.body&&o.body.message?z({[O]:{message:o.body.message,hidden:!1}}):z({[O]:{message:(0,c.__)("An error occurred while validating your vat id. Please try again.","woocommerce-germanized-pro"),hidden:!1}}),k(!1),x&&(0,l.extensionCartUpdate)({namespace:"woocommerce-germanized-pro-vat-id",data:{vat_id:e,address_type:r}})}))})).catch((t=>{t.json().then((function(e){z({[O]:{message:e.message,hidden:!1}})})),k(!1),x&&(0,l.extensionCartUpdate)({namespace:"woocommerce-germanized-pro-vat-id",data:{vat_id:e,address_type:r}})}))}}),[E,O,V,k,x,z,C]),I={id:`${r}-vat-id`,errorId:O,label:(0,c.__)("VAT ID","woocommerce-germanized-pro"),errorMessage:"",required:b(p.country,p.postcode),className:`wc-block-components-address-form__${r}_vat_id`,disabled:_},R=(0,t.useRef)(null);return N?(0,e.createElement)(l.ValidatedTextInput,{ref:R,key:I.id,value:v,...I,onChange:P,customFormatter:e=>(e=e.toUpperCase()).replace(/[^\w\.]/g,""),customValidation:e=>!e.value||(!!/^(ATU[0-9]{8}|BE[01][0-9]{9}|BG[0-9]{9,10}|HR[0-9]{11}|CY[A-Z0-9]{9}|CZ[0-9]{8,10}|DK[0-9]{8}|EE[0-9]{9}|FI[0-9]{8}|FR[0-9A-Z]{2}[0-9]{9}|DE[0-9]{9}|EL[0-9]{9}|HU[0-9]{8}|IE([0-9]{7}[A-Z]{1,2}|[0-9][A-Z][0-9]{5}[A-Z])|IT[0-9]{11}|LV[0-9]{11}|LT([0-9]{9}|[0-9]{12})|LU[0-9]{8}|MT[0-9]{8}|NL[0-9]{9}B[0-9]{2}|PL[0-9]{10}|PT[0-9]{9}|RO[0-9]{2,10}|SK[0-9]{10}|SI[0-9]{8}|ES(([A-Z])([0-9]{7})([A-Z]|[0-9])|([0-9])([0-9]{7})([A-Z]))|SE[0-9]{12}|GB([0-9]{9}|[0-9]{12}|GD[0-4][0-9]{2}|HA[5-9][0-9]{2}))$/.test(e.value)||(e.setCustomValidity((0,c.__)("The VAT ID you've provided is not correct.","woocommerce-germanized-pro")),!1))}):null};o(88);var v=JSON.parse('{"apiVersion":2,"name":"woocommerce-germanized-pro/checkout-billing-vat-id","version":"2.0.0","title":"VAT ID","category":"woocommerce","description":"Adds the VAT ID field to the billing address.","supports":{"align":false,"html":false,"multiple":false,"reusable":false,"lock":false},"parent":["woocommerce/checkout-billing-address-block"],"textdomain":"woocommerce-germanized-pro","attributes":{"className":{"type":"string","default":""},"lock":{"type":"object","default":{"remove":true,"move":false}}}}');(0,i.registerBlockType)(v,{icon:{src:(0,e.createElement)(n,{icon:a,className:"wc-block-editor-components-block-icon"})},edit:({attributes:o,setAttributes:s})=>{const n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{if(n.current){const{ownerDocument:e}=n.current,{defaultView:t}=e,o=t.document.getElementsByClassName("wp-block-woocommerce-checkout-billing-address-block")[0];if(void 0!==o){const e=o.getElementsByClassName("wc-gzd-billing-vat-id")[0];e&&(e.style.display="none");const t=new MutationObserver((()=>{let s=o.getElementsByClassName("wc-block-components-address-form-wrapper")[0];s||(s=o.getElementsByClassName("wc-block-components-address-form")[0]),s||(s=o.getElementsByClassName("wc-block-components-address-address-wrapper")[0]),s&&(t.disconnect(),e.style.display="block",s.appendChild(e))}));t.observe(o,{subtree:!0,childList:!0})}}}),[]),(0,e.createElement)("div",{className:"wc-gzd-vat-id wc-gzd-billing-vat-id",ref:n},(0,e.createElement)(h,{cart:{shippingAddress:{country:"DE",postcode:"12207"},billingAddress:{country:"DE",postcode:"12207"}},extensions:{},checkoutExtensionData:{setExtensionData:()=>{},extensionData:{}},addressType:"billing",isEditor:!0}))},save:({attributes:t})=>(0,e.createElement)("div",{...d.useBlockProps.save()})}),o(312);var E=JSON.parse('{"apiVersion":2,"name":"woocommerce-germanized-pro/checkout-shipping-vat-id","version":"2.0.0","title":"VAT ID","category":"woocommerce","description":"Adds the VAT ID field to the shipping address.","supports":{"align":false,"html":false,"multiple":false,"reusable":false,"lock":false},"parent":["woocommerce/checkout-shipping-address-block"],"textdomain":"woocommerce-germanized-pro","attributes":{"className":{"type":"string","default":""},"lock":{"type":"object","default":{"remove":true,"move":false}}}}');(0,i.registerBlockType)(E,{icon:{src:(0,e.createElement)(n,{icon:a,className:"wc-block-editor-components-block-icon"})},edit:({attributes:o,setAttributes:s})=>{const n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{if(n.current){const{ownerDocument:e}=n.current,{defaultView:t}=e,o=t.document.getElementsByClassName("wp-block-woocommerce-checkout-shipping-address-block")[0];if(void 0!==o){const e=o.getElementsByClassName("wc-gzd-shipping-vat-id")[0];e&&(e.style.display="none");const t=new MutationObserver((()=>{let s=o.getElementsByClassName("wc-block-components-address-form-wrapper")[0];s||(s=o.getElementsByClassName("wc-block-components-address-form")[0]),s||(s=o.getElementsByClassName("wc-block-components-address-address-wrapper")[0]),s&&(t.disconnect(),e.style.display="block",s.appendChild(e))}));t.observe(o,{subtree:!0,childList:!0})}}}),[]),(0,e.createElement)("div",{className:"wc-gzd-vat-id wc-gzd-shipping-vat-id",ref:n},(0,e.createElement)(h,{isEditor:!0,cart:{shippingAddress:{country:"DE",postcode:"12207"},billingAddress:{country:"DE",postcode:"12207"}},extensions:{},checkoutExtensionData:{setExtensionData:()=>{},extensionData:{}},addressType:"shipping"}))},save:({attributes:t})=>(0,e.createElement)("div",{...d.useBlockProps.save()})})}(),((window.wcGzdPro=window.wcGzdPro||{}).blocks=window.wcGzdPro.blocks||{}).checkout=s}();