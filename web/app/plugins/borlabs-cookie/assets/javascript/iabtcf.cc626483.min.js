var dr=Object.defineProperty;var pr=(s,t,e)=>t in s?dr(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var i=(s,t,e)=>(pr(s,typeof t!="symbol"?t+"":t,e),e);var S=(s,t,e)=>new Promise((r,n)=>{var o=d=>{try{a(e.next(d))}catch(h){n(h)}},c=d=>{try{a(e.throw(d))}catch(h){n(h)}},a=d=>d.done?r(d.value):Promise.resolve(d.value).then(o,c);a((e=e.apply(s,t)).next())});import{_ as B,a as hr}from"./observer.472990d3.min.js";import{k as Ze}from"./init.d0a8a83e.min.js";import{c as me}from"./_commonjsHelpers.187a63f9.min.js";var ne=function(s){return s&&s.Math===Math&&s},A=ne(typeof globalThis=="object"&&globalThis)||ne(typeof window=="object"&&window)||ne(typeof self=="object"&&self)||ne(typeof me=="object"&&me)||function(){return this}()||me||Function("return this")(),We={},F=function(s){try{return!!s()}catch(t){return!0}},fr=F,k=!fr(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),vr=F,Lt=!vr(function(){var s=function(){}.bind();return typeof s!="function"||s.hasOwnProperty("prototype")}),gr=Lt,ie=Function.prototype.call,Ke=gr?ie.bind(ie):function(){return ie.apply(ie,arguments)},Pt={},At={}.propertyIsEnumerable,Vt=Object.getOwnPropertyDescriptor,yr=Vt&&!At.call({1:2},1);Pt.f=yr?function(t){var e=Vt(this,t);return!!e&&e.enumerable}:At;var $t=function(s,t){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:t}},Nt=Lt,Dt=Function.prototype,Re=Dt.call,mr=Nt&&Dt.bind.bind(Re,Re),D=Nt?mr:function(s){return function(){return Re.apply(s,arguments)}},Rt=D,Er=Rt({}.toString),Sr=Rt("".slice),Ir=function(s){return Sr(Er(s),8,-1)},br=D,Cr=F,wr=Ir,Ee=Object,_r=br("".split),Tr=Cr(function(){return!Ee("z").propertyIsEnumerable(0)})?function(s){return wr(s)==="String"?_r(s,""):Ee(s)}:Ee,Ft=function(s){return s==null},Or=Ft,Lr=TypeError,xt=function(s){if(Or(s))throw new Lr("Can't call method on "+s);return s},Pr=Tr,Ar=xt,Qe=function(s){return Pr(Ar(s))},Fe=typeof document=="object"&&document.all,Vr=typeof Fe=="undefined"&&Fe!==void 0,Ut={all:Fe,IS_HTMLDDA:Vr},Mt=Ut,$r=Mt.all,V=Mt.IS_HTMLDDA?function(s){return typeof s=="function"||s===$r}:function(s){return typeof s=="function"},et=V,jt=Ut,Nr=jt.all,Q=jt.IS_HTMLDDA?function(s){return typeof s=="object"?s!==null:et(s)||s===Nr}:function(s){return typeof s=="object"?s!==null:et(s)},Se=A,Dr=V,Rr=function(s){return Dr(s)?s:void 0},Gt=function(s,t){return arguments.length<2?Rr(Se[s]):Se[s]&&Se[s][t]},Fr=D,xr=Fr({}.isPrototypeOf),Ur=typeof navigator!="undefined"&&String(navigator.userAgent)||"",kt=A,Ie=Ur,tt=kt.process,rt=kt.Deno,st=tt&&tt.versions||rt&&rt.version,nt=st&&st.v8,C,ue;nt&&(C=nt.split("."),ue=C[0]>0&&C[0]<4?1:+(C[0]+C[1]));!ue&&Ie&&(C=Ie.match(/Edge\/(\d+)/),(!C||C[1]>=74)&&(C=Ie.match(/Chrome\/(\d+)/),C&&(ue=+C[1])));var Mr=ue,it=Mr,jr=F,Gr=A,kr=Gr.String,Ht=!!Object.getOwnPropertySymbols&&!jr(function(){var s=Symbol("symbol detection");return!kr(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&it&&it<41}),Hr=Ht,Bt=Hr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Br=Gt,Wr=V,Kr=xr,Qr=Bt,zr=Object,Wt=Qr?function(s){return typeof s=="symbol"}:function(s){var t=Br("Symbol");return Wr(t)&&Kr(t.prototype,zr(s))},qr=String,Yr=function(s){try{return qr(s)}catch(t){return"Object"}},Jr=V,Xr=Yr,Zr=TypeError,es=function(s){if(Jr(s))return s;throw new Zr(Xr(s)+" is not a function")},ts=es,rs=Ft,ss=function(s,t){var e=s[t];return rs(e)?void 0:ts(e)},be=Ke,Ce=V,we=Q,ns=TypeError,is=function(s,t){var e,r;if(t==="string"&&Ce(e=s.toString)&&!we(r=be(e,s))||Ce(e=s.valueOf)&&!we(r=be(e,s))||t!=="string"&&Ce(e=s.toString)&&!we(r=be(e,s)))return r;throw new ns("Can't convert object to primitive value")},Kt={exports:{}},ot=A,os=Object.defineProperty,ze=function(s,t){try{os(ot,s,{value:t,configurable:!0,writable:!0})}catch(e){ot[s]=t}return t},as=A,cs=ze,at="__core-js_shared__",ls=as[at]||cs(at,{}),qe=ls,ct=qe;(Kt.exports=function(s,t){return ct[s]||(ct[s]=t!==void 0?t:{})})("versions",[]).push({version:"3.33.0",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Qt=Kt.exports,us=xt,ds=Object,ps=function(s){return ds(us(s))},hs=D,fs=ps,vs=hs({}.hasOwnProperty),H=Object.hasOwn||function(t,e){return vs(fs(t),e)},gs=D,ys=0,ms=Math.random(),Es=gs(1 .toString),zt=function(s){return"Symbol("+(s===void 0?"":s)+")_"+Es(++ys+ms,36)},Ss=A,Is=Qt,lt=H,bs=zt,Cs=Ht,ws=Bt,K=Ss.Symbol,_e=Is("wks"),_s=ws?K.for||K:K&&K.withoutSetter||bs,Ts=function(s){return lt(_e,s)||(_e[s]=Cs&&lt(K,s)?K[s]:_s("Symbol."+s)),_e[s]},Os=Ke,ut=Q,dt=Wt,Ls=ss,Ps=is,As=Ts,Vs=TypeError,$s=As("toPrimitive"),Ns=function(s,t){if(!ut(s)||dt(s))return s;var e=Ls(s,$s),r;if(e){if(t===void 0&&(t="default"),r=Os(e,s,t),!ut(r)||dt(r))return r;throw new Vs("Can't convert object to primitive value")}return t===void 0&&(t="number"),Ps(s,t)},Ds=Ns,Rs=Wt,qt=function(s){var t=Ds(s,"string");return Rs(t)?t:t+""},Fs=A,pt=Q,xe=Fs.document,xs=pt(xe)&&pt(xe.createElement),Us=function(s){return xs?xe.createElement(s):{}},Ms=k,js=F,Gs=Us,Yt=!Ms&&!js(function(){return Object.defineProperty(Gs("div"),"a",{get:function(){return 7}}).a!==7}),ks=k,Hs=Ke,Bs=Pt,Ws=$t,Ks=Qe,Qs=qt,zs=H,qs=Yt,ht=Object.getOwnPropertyDescriptor;We.f=ks?ht:function(t,e){if(t=Ks(t),e=Qs(e),qs)try{return ht(t,e)}catch(r){}if(zs(t,e))return Ws(!Hs(Bs.f,t,e),t[e])};var fe={},Ys=k,Js=F,Xs=Ys&&Js(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Zs=Q,en=String,tn=TypeError,Jt=function(s){if(Zs(s))return s;throw new tn(en(s)+" is not an object")},rn=k,sn=Yt,nn=Xs,oe=Jt,ft=qt,on=TypeError,Te=Object.defineProperty,an=Object.getOwnPropertyDescriptor,Oe="enumerable",Le="configurable",Pe="writable";fe.f=rn?nn?function(t,e,r){if(oe(t),e=ft(e),oe(r),typeof t=="function"&&e==="prototype"&&"value"in r&&Pe in r&&!r[Pe]){var n=an(t,e);n&&n[Pe]&&(t[e]=r.value,r={configurable:Le in r?r[Le]:n[Le],enumerable:Oe in r?r[Oe]:n[Oe],writable:!1})}return Te(t,e,r)}:Te:function(t,e,r){if(oe(t),e=ft(e),oe(r),sn)try{return Te(t,e,r)}catch(n){}if("get"in r||"set"in r)throw new on("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var cn=k,ln=fe,un=$t,Xt=cn?function(s,t,e){return ln.f(s,t,un(1,e))}:function(s,t,e){return s[t]=e,s},Zt={exports:{}},Ue=k,dn=H,er=Function.prototype,pn=Ue&&Object.getOwnPropertyDescriptor,Ye=dn(er,"name"),hn=Ye&&function(){}.name==="something",fn=Ye&&(!Ue||Ue&&pn(er,"name").configurable),vn={EXISTS:Ye,PROPER:hn,CONFIGURABLE:fn},gn=D,yn=V,Me=qe,mn=gn(Function.toString);yn(Me.inspectSource)||(Me.inspectSource=function(s){return mn(s)});var En=Me.inspectSource,Sn=A,In=V,vt=Sn.WeakMap,bn=In(vt)&&/native code/.test(String(vt)),Cn=Qt,wn=zt,gt=Cn("keys"),_n=function(s){return gt[s]||(gt[s]=wn(s))},tr={},Tn=bn,rr=A,On=Q,Ln=Xt,Ae=H,Ve=qe,Pn=_n,An=tr,yt="Object already initialized",je=rr.TypeError,Vn=rr.WeakMap,de,ee,pe,$n=function(s){return pe(s)?ee(s):de(s,{})},Nn=function(s){return function(t){var e;if(!On(t)||(e=ee(t)).type!==s)throw new je("Incompatible receiver, "+s+" required");return e}};if(Tn||Ve.state){var _=Ve.state||(Ve.state=new Vn);_.get=_.get,_.has=_.has,_.set=_.set,de=function(s,t){if(_.has(s))throw new je(yt);return t.facade=s,_.set(s,t),t},ee=function(s){return _.get(s)||{}},pe=function(s){return _.has(s)}}else{var W=Pn("state");An[W]=!0,de=function(s,t){if(Ae(s,W))throw new je(yt);return t.facade=s,Ln(s,W,t),t},ee=function(s){return Ae(s,W)?s[W]:{}},pe=function(s){return Ae(s,W)}}var Dn={set:de,get:ee,has:pe,enforce:$n,getterFor:Nn},Je=D,Rn=F,Fn=V,ae=H,Ge=k,xn=vn.CONFIGURABLE,Un=En,sr=Dn,Mn=sr.enforce,jn=sr.get,mt=String,ce=Object.defineProperty,Gn=Je("".slice),kn=Je("".replace),Hn=Je([].join),Bn=Ge&&!Rn(function(){return ce(function(){},"length",{value:8}).length!==8}),Wn=String(String).split("String"),Kn=Zt.exports=function(s,t,e){Gn(mt(t),0,7)==="Symbol("&&(t="["+kn(mt(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(t="get "+t),e&&e.setter&&(t="set "+t),(!ae(s,"name")||xn&&s.name!==t)&&(Ge?ce(s,"name",{value:t,configurable:!0}):s.name=t),Bn&&e&&ae(e,"arity")&&s.length!==e.arity&&ce(s,"length",{value:e.arity});try{e&&ae(e,"constructor")&&e.constructor?Ge&&ce(s,"prototype",{writable:!1}):s.prototype&&(s.prototype=void 0)}catch(n){}var r=Mn(s);return ae(r,"source")||(r.source=Hn(Wn,typeof t=="string"?t:"")),s};Function.prototype.toString=Kn(function(){return Fn(this)&&jn(this).source||Un(this)},"toString");var Qn=Zt.exports,zn=V,qn=fe,Yn=Qn,Jn=ze,Xn=function(s,t,e,r){r||(r={});var n=r.enumerable,o=r.name!==void 0?r.name:t;if(zn(e)&&Yn(e,o,r),r.global)n?s[t]=e:Jn(t,e);else{try{r.unsafe?s[t]&&(n=!0):delete s[t]}catch(c){}n?s[t]=e:qn.f(s,t,{value:e,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return s},nr={},Zn=Math.ceil,ei=Math.floor,ti=Math.trunc||function(t){var e=+t;return(e>0?ei:Zn)(e)},ri=ti,ir=function(s){var t=+s;return t!==t||t===0?0:ri(t)},si=ir,ni=Math.max,ii=Math.min,oi=function(s,t){var e=si(s);return e<0?ni(e+t,0):ii(e,t)},ai=ir,ci=Math.min,li=function(s){return s>0?ci(ai(s),9007199254740991):0},ui=li,di=function(s){return ui(s.length)},pi=Qe,hi=oi,fi=di,Et=function(s){return function(t,e,r){var n=pi(t),o=fi(n),c=hi(r,o),a;if(s&&e!==e){for(;o>c;)if(a=n[c++],a!==a)return!0}else for(;o>c;c++)if((s||c in n)&&n[c]===e)return s||c||0;return!s&&-1}},vi={includes:Et(!0),indexOf:Et(!1)},gi=D,$e=H,yi=Qe,mi=vi.indexOf,Ei=tr,St=gi([].push),Si=function(s,t){var e=yi(s),r=0,n=[],o;for(o in e)!$e(Ei,o)&&$e(e,o)&&St(n,o);for(;t.length>r;)$e(e,o=t[r++])&&(~mi(n,o)||St(n,o));return n},Ii=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bi=Si,Ci=Ii,wi=Ci.concat("length","prototype");nr.f=Object.getOwnPropertyNames||function(t){return bi(t,wi)};var or={};or.f=Object.getOwnPropertySymbols;var _i=Gt,Ti=D,Oi=nr,Li=or,Pi=Jt,Ai=Ti([].concat),Vi=_i("Reflect","ownKeys")||function(t){var e=Oi.f(Pi(t)),r=Li.f;return r?Ai(e,r(t)):e},It=H,$i=Vi,Ni=We,Di=fe,Ri=function(s,t,e){for(var r=$i(t),n=Di.f,o=Ni.f,c=0;c<r.length;c++){var a=r[c];!It(s,a)&&!(e&&It(e,a))&&n(s,a,o(t,a))}},Fi=F,xi=V,Ui=/#|\.prototype\./,re=function(s,t){var e=ji[Mi(s)];return e===ki?!0:e===Gi?!1:xi(t)?Fi(t):!!t},Mi=re.normalize=function(s){return String(s).replace(Ui,".").toLowerCase()},ji=re.data={},Gi=re.NATIVE="N",ki=re.POLYFILL="P",Hi=re,Ne=A,Bi=We.f,Wi=Xt,Ki=Xn,Qi=ze,zi=Ri,qi=Hi,Yi=function(s,t){var e=s.target,r=s.global,n=s.stat,o,c,a,d,h,f;if(r?c=Ne:n?c=Ne[e]||Qi(e,{}):c=(Ne[e]||{}).prototype,c)for(a in t){if(h=t[a],s.dontCallGetSet?(f=Bi(c,a),d=f&&f.value):d=c[a],o=qi(r?a:e+(n?".":"#")+a,s.forced),!o&&d!==void 0){if(typeof h==typeof d)continue;zi(h,d)}(s.sham||d&&d.sham)&&Wi(h,"sham",!0),Ki(c,a,h,s)}},Ji=Q,Xi=Math.floor,Zi=Number.isInteger||function(t){return!Ji(t)&&isFinite(t)&&Xi(t)===t},eo=Yi,to=Zi;eo({target:"Number",stat:!0},{isInteger:to});class x extends Error{constructor(t){super(t),this.name="DecodingError"}}class N extends Error{constructor(t){super(t),this.name="EncodingError"}}class q extends Error{constructor(t){super(t),this.name="GVLError"}}class $ extends Error{constructor(t,e,r=""){super(`invalid value ${e} passed for ${t} ${r}`),this.name="TCModelError"}}class U{static encode(t){if(!/^[0-1]+$/.test(t))throw new N("Invalid bitField");const e=t.length%this.LCM;t+=e?"0".repeat(this.LCM-e):"";let r="";for(let n=0;n<t.length;n+=this.BASIS)r+=this.DICT[parseInt(t.substr(n,this.BASIS),2)];return r}static decode(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new x("Invalidly encoded Base64URL string");let e="";for(let r=0;r<t.length;r++){const n=this.REVERSE_DICT.get(t[r]).toString(2);e+="0".repeat(this.BASIS-n.length)+n}return e}}i(U,"DICT","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(U,"REVERSE_DICT",new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]])),i(U,"BASIS",6),i(U,"LCM",24);const T=class T{has(t){return T.langSet.has(t)}parseLanguage(t){t=t.toUpperCase();const e=t.split("-")[0];if(t.length>=2&&e.length==2){if(T.langSet.has(t))return t;if(T.langSet.has(e))return e;const r=e+"-"+e;if(T.langSet.has(r))return r;for(const n of T.langSet)if(n.indexOf(t)!==-1||n.indexOf(e)!==-1)return n}throw new Error(`unsupported language ${t}`)}forEach(t){T.langSet.forEach(t)}get size(){return T.langSet.size}};i(T,"langSet",new Set(["AR","BG","BS","CA","CS","DA","DE","EL","EN","ES","ET","EU","FI","FR","GL","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT-BR","PT-PT","RO","RU","SK","SL","SR-LATN","SR-CYRL","SV","TR","ZH"]));let ke=T;class l{}i(l,"cmpId","cmpId"),i(l,"cmpVersion","cmpVersion"),i(l,"consentLanguage","consentLanguage"),i(l,"consentScreen","consentScreen"),i(l,"created","created"),i(l,"supportOOB","supportOOB"),i(l,"isServiceSpecific","isServiceSpecific"),i(l,"lastUpdated","lastUpdated"),i(l,"numCustomPurposes","numCustomPurposes"),i(l,"policyVersion","policyVersion"),i(l,"publisherCountryCode","publisherCountryCode"),i(l,"publisherCustomConsents","publisherCustomConsents"),i(l,"publisherCustomLegitimateInterests","publisherCustomLegitimateInterests"),i(l,"publisherLegitimateInterests","publisherLegitimateInterests"),i(l,"publisherConsents","publisherConsents"),i(l,"publisherRestrictions","publisherRestrictions"),i(l,"purposeConsents","purposeConsents"),i(l,"purposeLegitimateInterests","purposeLegitimateInterests"),i(l,"purposeOneTreatment","purposeOneTreatment"),i(l,"specialFeatureOptins","specialFeatureOptins"),i(l,"useNonStandardTexts","useNonStandardTexts"),i(l,"vendorConsents","vendorConsents"),i(l,"vendorLegitimateInterests","vendorLegitimateInterests"),i(l,"vendorListVersion","vendorListVersion"),i(l,"vendorsAllowed","vendorsAllowed"),i(l,"vendorsDisclosed","vendorsDisclosed"),i(l,"version","version");class se{clone(){const t=new this.constructor;return Object.keys(this).forEach(r=>{const n=this.deepClone(this[r]);n!==void 0&&(t[r]=n)}),t}deepClone(t){const e=typeof t;if(e==="number"||e==="string"||e==="boolean")return t;if(t!==null&&e==="object"){if(typeof t.clone=="function")return t.clone();if(t instanceof Date)return new Date(t.getTime());if(t[Symbol.iterator]!==void 0){const r=[];for(const n of t)r.push(this.deepClone(n));return t instanceof Array?r:new t.constructor(r)}else{const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=this.deepClone(t[n]));return r}}}}var L;(function(s){s[s.NOT_ALLOWED=0]="NOT_ALLOWED",s[s.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",s[s.REQUIRE_LI=2]="REQUIRE_LI"})(L||(L={}));const Z=class Z extends se{constructor(e,r){super();i(this,"purposeId_");i(this,"restrictionType");e!==void 0&&(this.purposeId=e),r!==void 0&&(this.restrictionType=r)}static unHash(e){const r=e.split(this.hashSeparator),n=new Z;if(r.length!==2)throw new $("hash",e);return n.purposeId=parseInt(r[0],10),n.restrictionType=parseInt(r[1],10),n}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${Z.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(e){this.purposeId_=e}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===L.NOT_ALLOWED||this.restrictionType===L.REQUIRE_CONSENT||this.restrictionType===L.REQUIRE_LI)}isSameAs(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}};i(Z,"hashSeparator","-");let M=Z;class ar extends se{constructor(){super(...arguments);i(this,"bitLength",0);i(this,"map",new Map);i(this,"gvl_")}has(e){return this.map.has(e)}isOkToHave(e,r,n){var c;let o=!0;if((c=this.gvl)!=null&&c.vendors){const a=this.gvl.vendors[n];if(a)if(e===L.NOT_ALLOWED)o=a.legIntPurposes.includes(r)||a.purposes.includes(r);else if(a.flexiblePurposes.length)switch(e){case L.REQUIRE_CONSENT:o=a.flexiblePurposes.includes(r)&&a.legIntPurposes.includes(r);break;case L.REQUIRE_LI:o=a.flexiblePurposes.includes(r)&&a.purposes.includes(r);break}else o=!1;else o=!1}return o}add(e,r){if(this.isOkToHave(r.restrictionType,r.purposeId,e)){const n=r.hash;this.has(n)||(this.map.set(n,new Set),this.bitLength=0),this.map.get(n).add(e)}}restrictPurposeToLegalBasis(e){const r=Array.from(this.gvl.vendorIds),n=e.hash,o=r[r.length-1],c=[...Array(o).keys()].map(a=>a+1);if(!this.has(n))this.map.set(n,new Set(c)),this.bitLength=0;else for(let a=1;a<=o;a++)this.map.get(n).add(a)}getVendors(e){let r=[];if(e){const n=e.hash;this.has(n)&&(r=Array.from(this.map.get(n)))}else{const n=new Set;this.map.forEach(o=>{o.forEach(c=>{n.add(c)})}),r=Array.from(n)}return r.sort((n,o)=>n-o)}getRestrictionType(e,r){let n;return this.getRestrictions(e).forEach(o=>{o.purposeId===r&&(n===void 0||n>o.restrictionType)&&(n=o.restrictionType)}),n}vendorHasRestriction(e,r){let n=!1;const o=this.getRestrictions(e);for(let c=0;c<o.length&&!n;c++)n=r.isSameAs(o[c]);return n}getMaxVendorId(){let e=0;return this.map.forEach(r=>{e=Math.max(Array.from(r)[r.size-1],e)}),e}getRestrictions(e){const r=[];return this.map.forEach((n,o)=>{e?n.has(e)&&r.push(M.unHash(o)):r.push(M.unHash(o))}),r}getPurposes(){const e=new Set;return this.map.forEach((r,n)=>{e.add(M.unHash(n).purposeId)}),Array.from(e)}remove(e,r){const n=r.hash,o=this.map.get(n);o&&(o.delete(e),o.size==0&&(this.map.delete(n),this.bitLength=0))}set gvl(e){this.gvl_||(this.gvl_=e,this.map.forEach((r,n)=>{const o=M.unHash(n);Array.from(r).forEach(a=>{this.isOkToHave(o.restrictionType,o.purposeId,a)||r.delete(a)})}))}get gvl(){return this.gvl_}isEmpty(){return this.map.size===0}get numRestrictions(){return this.map.size}}var bt;(function(s){s.COOKIE="cookie",s.WEB="web",s.APP="app"})(bt||(bt={}));var y;(function(s){s.CORE="core",s.VENDORS_DISCLOSED="vendorsDisclosed",s.VENDORS_ALLOWED="vendorsAllowed",s.PUBLISHER_TC="publisherTC"})(y||(y={}));class he{}i(he,"ID_TO_KEY",[y.CORE,y.VENDORS_DISCLOSED,y.VENDORS_ALLOWED,y.PUBLISHER_TC]),i(he,"KEY_TO_ID",{[y.CORE]:0,[y.VENDORS_DISCLOSED]:1,[y.VENDORS_ALLOWED]:2,[y.PUBLISHER_TC]:3});class b extends se{constructor(){super(...arguments);i(this,"bitLength",0);i(this,"maxId_",0);i(this,"set_",new Set)}*[Symbol.iterator](){for(let e=1;e<=this.maxId;e++)yield[e,this.has(e)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(e){return this.set_.has(e)}unset(e){Array.isArray(e)?e.forEach(r=>this.unset(r)):typeof e=="object"?this.unset(Object.keys(e).map(r=>Number(r))):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(r=>{this.maxId_=Math.max(this.maxId,r)})))}isIntMap(e){let r=typeof e=="object";return r=r&&Object.keys(e).every(n=>{let o=Number.isInteger(parseInt(n,10));return o=o&&this.isValidNumber(e[n].id),o=o&&e[n].name!==void 0,o}),r}isValidNumber(e){return parseInt(e,10)>0}isSet(e){let r=!1;return e instanceof Set&&(r=Array.from(e).every(this.isValidNumber)),r}set(e){if(Array.isArray(e))e.forEach(r=>this.set(r));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(r=>Number(r)));else if(this.isValidNumber(e))this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0;else throw new $("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap")}empty(){this.set_=new Set}forEach(e){for(let r=1;r<=this.maxId;r++)e(this.has(r),r)}get size(){return this.set_.size}setAll(e){this.set(e)}}var So,Io,bo,Co,wo,_o,To,Oo,Lo,Po,Ao,Vo,$o,No,Do,Ro,Fo,xo;class u{}So=l.cmpId,Io=l.cmpVersion,bo=l.consentLanguage,Co=l.consentScreen,wo=l.created,_o=l.isServiceSpecific,To=l.lastUpdated,Oo=l.policyVersion,Lo=l.publisherCountryCode,Po=l.publisherLegitimateInterests,Ao=l.publisherConsents,Vo=l.purposeConsents,$o=l.purposeLegitimateInterests,No=l.purposeOneTreatment,Do=l.specialFeatureOptins,Ro=l.useNonStandardTexts,Fo=l.vendorListVersion,xo=l.version,i(u,So,12),i(u,Io,12),i(u,bo,12),i(u,Co,6),i(u,wo,36),i(u,_o,1),i(u,To,36),i(u,Oo,6),i(u,Lo,12),i(u,Po,24),i(u,Ao,24),i(u,Vo,24),i(u,$o,24),i(u,No,1),i(u,Do,12),i(u,Ro,1),i(u,Fo,12),i(u,xo,6),i(u,"anyBoolean",1),i(u,"encodingType",1),i(u,"maxId",16),i(u,"numCustomPurposes",6),i(u,"numEntries",12),i(u,"numRestrictions",12),i(u,"purposeId",6),i(u,"restrictionType",2),i(u,"segmentType",3),i(u,"singleOrRange",1),i(u,"vendorId",16);class P{static encode(t){return String(Number(t))}static decode(t){return t==="1"}}class g{static encode(t,e){let r;if(typeof t=="string"&&(t=parseInt(t,10)),r=t.toString(2),r.length>e||t<0)throw new N(`${t} too large to encode into ${e}`);return r.length<e&&(r="0".repeat(e-r.length)+r),r}static decode(t,e){if(e!==t.length)throw new x("invalid bit length");return parseInt(t,2)}}class Ct{static encode(t,e){return g.encode(Math.round(t.getTime()/100),e)}static decode(t,e){if(e!==t.length)throw new x("invalid bit length");const r=new Date;return r.setTime(g.decode(t,e)*100),r}}class R{static encode(t,e){let r="";for(let n=1;n<=e;n++)r+=P.encode(t.has(n));return r}static decode(t,e){if(t.length!==e)throw new x("bitfield encoding length mismatch");const r=new b;for(let n=1;n<=e;n++)P.decode(t[n-1])&&r.set(n);return r.bitLength=t.length,r}}class wt{static encode(t,e){t=t.toUpperCase();const r=65,n=t.charCodeAt(0)-r,o=t.charCodeAt(1)-r;if(n<0||n>25||o<0||o>25)throw new N(`invalid language code: ${t}`);if(e%2===1)throw new N(`numBits must be even, ${e} is not valid`);e=e/2;const c=g.encode(n,e),a=g.encode(o,e);return c+a}static decode(t,e){let r;if(e===t.length&&!(t.length%2)){const o=t.length/2,c=g.decode(t.slice(0,o),o)+65,a=g.decode(t.slice(o),o)+65;r=String.fromCharCode(c)+String.fromCharCode(a)}else throw new x("invalid bit length for language");return r}}class ro{static encode(t){let e=g.encode(t.numRestrictions,u.numRestrictions);if(!t.isEmpty()){const r=(n,o)=>{for(let c=n+1;c<=o;c++)if(t.gvl.vendorIds.has(c))return c;return n};t.getRestrictions().forEach(n=>{e+=g.encode(n.purposeId,u.purposeId),e+=g.encode(n.restrictionType,u.restrictionType);const o=t.getVendors(n),c=o.length;let a=0,d=0,h="";for(let f=0;f<c;f++){const E=o[f];if(d===0&&(a++,d=E),f===c-1||o[f+1]>r(E,o[c-1])){const m=E!==d;h+=P.encode(m),h+=g.encode(d,u.vendorId),m&&(h+=g.encode(E,u.vendorId)),d=0}}e+=g.encode(a,u.numEntries),e+=h})}return e}static decode(t){let e=0;const r=new ar,n=g.decode(t.substr(e,u.numRestrictions),u.numRestrictions);e+=u.numRestrictions;for(let o=0;o<n;o++){const c=g.decode(t.substr(e,u.purposeId),u.purposeId);e+=u.purposeId;const a=g.decode(t.substr(e,u.restrictionType),u.restrictionType);e+=u.restrictionType;const d=new M(c,a),h=g.decode(t.substr(e,u.numEntries),u.numEntries);e+=u.numEntries;for(let f=0;f<h;f++){const E=P.decode(t.substr(e,u.anyBoolean));e+=u.anyBoolean;const m=g.decode(t.substr(e,u.vendorId),u.vendorId);if(e+=u.vendorId,E){const z=g.decode(t.substr(e,u.vendorId),u.vendorId);if(e+=u.vendorId,z<m)throw new x(`Invalid RangeEntry: endVendorId ${z} is less than ${m}`);for(let ye=m;ye<=z;ye++)r.add(ye,d)}else r.add(m,d)}}return r.bitLength=e,r}}var J;(function(s){s[s.FIELD=0]="FIELD",s[s.RANGE=1]="RANGE"})(J||(J={}));class Y{static encode(t){const e=[];let r=[],n=g.encode(t.maxId,u.maxId),o="",c;const a=u.maxId+u.encodingType,d=a+t.maxId,h=u.vendorId*2+u.singleOrRange+u.numEntries;let f=a+u.numEntries;return t.forEach((E,m)=>{o+=P.encode(E),c=t.maxId>h&&f<d,c&&E&&(t.has(m+1)?r.length===0&&(r.push(m),f+=u.singleOrRange,f+=u.vendorId):(r.push(m),f+=u.vendorId,e.push(r),r=[]))}),c?(n+=String(J.RANGE),n+=this.buildRangeEncoding(e)):(n+=String(J.FIELD),n+=o),n}static decode(t,e){let r,n=0;const o=g.decode(t.substr(n,u.maxId),u.maxId);n+=u.maxId;const c=g.decode(t.charAt(n),u.encodingType);if(n+=u.encodingType,c===J.RANGE){if(r=new b,e===1){if(t.substr(n,1)==="1")throw new x("Unable to decode default consent=1");n++}const a=g.decode(t.substr(n,u.numEntries),u.numEntries);n+=u.numEntries;for(let d=0;d<a;d++){const h=P.decode(t.charAt(n));n+=u.singleOrRange;const f=g.decode(t.substr(n,u.vendorId),u.vendorId);if(n+=u.vendorId,h){const E=g.decode(t.substr(n,u.vendorId),u.vendorId);n+=u.vendorId;for(let m=f;m<=E;m++)r.set(m)}else r.set(f)}}else{const a=t.substr(n,o);n+=o,r=R.decode(a,o)}return r.bitLength=n,r}static buildRangeEncoding(t){const e=t.length;let r=g.encode(e,u.numEntries);return t.forEach(n=>{const o=n.length===1;r+=P.encode(!o),r+=g.encode(n[0],u.vendorId),o||(r+=g.encode(n[1],u.vendorId))}),r}}function _t(){return{[l.version]:g,[l.created]:Ct,[l.lastUpdated]:Ct,[l.cmpId]:g,[l.cmpVersion]:g,[l.consentScreen]:g,[l.consentLanguage]:wt,[l.vendorListVersion]:g,[l.policyVersion]:g,[l.isServiceSpecific]:P,[l.useNonStandardTexts]:P,[l.specialFeatureOptins]:R,[l.purposeConsents]:R,[l.purposeLegitimateInterests]:R,[l.purposeOneTreatment]:P,[l.publisherCountryCode]:wt,[l.vendorConsents]:Y,[l.vendorLegitimateInterests]:Y,[l.publisherRestrictions]:ro,segmentType:g,[l.vendorsDisclosed]:Y,[l.vendorsAllowed]:Y,[l.publisherConsents]:R,[l.publisherLegitimateInterests]:R,[l.numCustomPurposes]:g,[l.publisherCustomConsents]:R,[l.publisherCustomLegitimateInterests]:R}}class so{constructor(){i(this,1,{[y.CORE]:[l.version,l.created,l.lastUpdated,l.cmpId,l.cmpVersion,l.consentScreen,l.consentLanguage,l.vendorListVersion,l.purposeConsents,l.vendorConsents]});i(this,2,{[y.CORE]:[l.version,l.created,l.lastUpdated,l.cmpId,l.cmpVersion,l.consentScreen,l.consentLanguage,l.vendorListVersion,l.policyVersion,l.isServiceSpecific,l.useNonStandardTexts,l.specialFeatureOptins,l.purposeConsents,l.purposeLegitimateInterests,l.purposeOneTreatment,l.publisherCountryCode,l.vendorConsents,l.vendorLegitimateInterests,l.publisherRestrictions],[y.PUBLISHER_TC]:[l.publisherConsents,l.publisherLegitimateInterests,l.numCustomPurposes,l.publisherCustomConsents,l.publisherCustomLegitimateInterests],[y.VENDORS_ALLOWED]:[l.vendorsAllowed],[y.VENDORS_DISCLOSED]:[l.vendorsDisclosed]})}}class no{constructor(t,e){i(this,1,[y.CORE]);i(this,2,[y.CORE]);if(t.version===2)if(t.isServiceSpecific)this[2].push(y.PUBLISHER_TC);else{const r=!!(e&&e.isForVendors);(!r||t[l.supportOOB]===!0)&&this[2].push(y.VENDORS_DISCLOSED),r&&(t[l.supportOOB]&&t[l.vendorsAllowed].size>0&&this[2].push(y.VENDORS_ALLOWED),this[2].push(y.PUBLISHER_TC))}}}class He{static encode(t,e){let r;try{r=this.fieldSequence[String(t.version)][e]}catch(c){throw new N(`Unable to encode version: ${t.version}, segment: ${e}`)}let n="";e!==y.CORE&&(n=g.encode(he.KEY_TO_ID[e],u.segmentType));const o=_t();return r.forEach(c=>{const a=t[c],d=o[c];let h=u[c];h===void 0&&this.isPublisherCustom(c)&&(h=Number(t[l.numCustomPurposes]));try{n+=d.encode(a,h)}catch(f){throw new N(`Error encoding ${e}->${c}: ${f.message}`)}}),U.encode(n)}static decode(t,e,r){const n=U.decode(t);let o=0;r===y.CORE&&(e.version=g.decode(n.substr(o,u[l.version]),u[l.version])),r!==y.CORE&&(o+=u.segmentType);const c=this.fieldSequence[String(e.version)][r],a=_t();return c.forEach(d=>{const h=a[d];let f=u[d];if(f===void 0&&this.isPublisherCustom(d)&&(f=Number(e[l.numCustomPurposes])),f!==0){const E=n.substr(o,f);if(h===Y?e[d]=h.decode(E,e.version):e[d]=h.decode(E,f),Number.isInteger(f))o+=f;else if(Number.isInteger(e[d].bitLength))o+=e[d].bitLength;else throw new x(d)}}),e}static isPublisherCustom(t){return t.indexOf("publisherCustom")===0}}i(He,"fieldSequence",new so);class cr{static process(t,e){const r=t.gvl;if(!r)throw new N("Unable to encode TCModel without a GVL");if(!r.isReady)throw new N("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");t=t.clone(),t.consentLanguage=r.language.slice(0,2).toUpperCase(),(e==null?void 0:e.version)>0&&(e==null?void 0:e.version)<=this.processor.length?t.version=e.version:t.version=this.processor.length;const n=t.version-1;if(!this.processor[n])throw new N(`Invalid version: ${t.version}`);return this.processor[n](t,r)}}i(cr,"processor",[t=>t,(t,e)=>{t.publisherRestrictions.gvl=e,t.purposeLegitimateInterests.unset([1,3,4,5,6]);const r=new Map;return r.set("legIntPurposes",t.vendorLegitimateInterests),r.set("purposes",t.vendorConsents),r.forEach((n,o)=>{n.forEach((c,a)=>{if(c){const d=e.vendors[a];if(!d||d.deletedDate)n.unset(a);else if(d[o].length===0&&!(o==="legIntPurposes"&&d.purposes.length===0&&d.legIntPurposes.length===0&&d.specialPurposes.length>0))if(t.isServiceSpecific)if(d.flexiblePurposes.length===0)n.unset(a);else{const h=t.publisherRestrictions.getRestrictions(a);let f=!1;for(let E=0,m=h.length;E<m&&!f;E++)f=h[E].restrictionType===L.REQUIRE_CONSENT&&o==="purposes"||h[E].restrictionType===L.REQUIRE_LI&&o==="legIntPurposes";f||n.unset(a)}else n.unset(a)}})}),t.vendorsDisclosed.set(e.vendors),t}]);class io{static absCall(t,e,r,n){return new Promise((o,c)=>{const a=new XMLHttpRequest,d=()=>{if(a.readyState==XMLHttpRequest.DONE)if(a.status>=200&&a.status<300){let m=a.response;if(typeof m=="string")try{m=JSON.parse(m)}catch(z){}o(m)}else c(new Error(`HTTP Status: ${a.status} response type: ${a.responseType}`))},h=()=>{c(new Error("error"))},f=()=>{c(new Error("aborted"))},E=()=>{c(new Error("Timeout "+n+"ms "+t))};a.withCredentials=r,a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("abort",f),e===null?a.open("GET",t,!0):a.open("POST",t,!0),a.responseType="json",a.timeout=n,a.ontimeout=E,a.send(e)})}static post(t,e,r=!1,n=0){return this.absCall(t,JSON.stringify(e),r,n)}static fetch(t,e=!1,r=0){return this.absCall(t,null,e,r)}}const v=class v extends se{constructor(e){super();i(this,"readyPromise");i(this,"gvlSpecificationVersion");i(this,"vendorListVersion");i(this,"tcfPolicyVersion");i(this,"lastUpdated");i(this,"purposes");i(this,"specialPurposes");i(this,"features");i(this,"specialFeatures");i(this,"isReady_",!1);i(this,"vendors_");i(this,"vendorIds");i(this,"fullVendorList");i(this,"byPurposeVendorMap");i(this,"bySpecialPurposeVendorMap");i(this,"byFeatureVendorMap");i(this,"bySpecialFeatureVendorMap");i(this,"stacks");i(this,"dataCategories");i(this,"lang_");i(this,"cacheLang_");i(this,"isLatest",!1);let r=v.baseUrl;if(this.lang_=v.DEFAULT_LANGUAGE,this.cacheLang_=v.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!r)throw new q("must specify GVL.baseUrl before loading GVL json");if(e>0){const n=e;v.CACHE.has(n)?(this.populate(v.CACHE.get(n)),this.readyPromise=Promise.resolve()):(r+=v.versionedFilename.replace("[VERSION]",String(n)),this.readyPromise=this.fetchJson(r))}else v.CACHE.has(v.LATEST_CACHE_KEY)?(this.populate(v.CACHE.get(v.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(r+v.latestFilename))}}static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new q("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&e[e.length-1]!=="/"&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}static emptyLanguageCache(e){let r=!1;return e==null&&v.LANGUAGE_CACHE.size>0?(v.LANGUAGE_CACHE=new Map,r=!0):typeof e=="string"&&this.consentLanguages.has(e.toUpperCase())&&(v.LANGUAGE_CACHE.delete(e.toUpperCase()),r=!0),r}static emptyCache(e){let r=!1;return Number.isInteger(e)&&e>=0?(v.CACHE.delete(e),r=!0):e===void 0&&(v.CACHE=new Map,r=!0),r}cacheLanguage(){v.LANGUAGE_CACHE.has(this.cacheLang_)||v.LANGUAGE_CACHE.set(this.cacheLang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories})}fetchJson(e){return S(this,null,function*(){try{this.populate(yield io.fetch(e))}catch(r){throw new q(r.message)}})}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories,vendors:this.fullVendorList}))}changeLanguage(e){return S(this,null,function*(){let r=e;try{r=v.consentLanguages.parseLanguage(e)}catch(o){throw new q("Error during parsing the language: "+o.message)}const n=e.toUpperCase();if(!(r.toLowerCase()===v.DEFAULT_LANGUAGE.toLowerCase()&&!v.LANGUAGE_CACHE.has(n))&&r!==this.lang_)if(this.lang_=r,v.LANGUAGE_CACHE.has(n)){const o=v.LANGUAGE_CACHE.get(n);for(const c in o)o.hasOwnProperty(c)&&(this[c]=o[c])}else{const o=v.baseUrl+v.languageFilename.replace("[LANG]",this.lang_.toLowerCase());try{yield this.fetchJson(o),this.cacheLang_=n,this.cacheLanguage()}catch(c){throw new q("unable to load language: "+c.message)}}})}get language(){return this.lang_}isVendorList(e){return e!==void 0&&e.vendors!==void 0}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&v.CACHE.set(v.LATEST_CACHE_KEY,this.getJson()),v.CACHE.has(this.vendorListVersion)||v.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(r=>{this.byPurposeVendorMap[r]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(r=>{this.bySpecialPurposeVendorMap[r]=new Set}),Object.keys(this.features).forEach(r=>{this.byFeatureVendorMap[r]=new Set}),Object.keys(this.specialFeatures).forEach(r=>{this.bySpecialFeatureVendorMap[r]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(r=>+r)),this.vendorIds=new Set(e),this.vendors_=e.reduce((r,n)=>{const o=this.vendors_[String(n)];return o&&o.deletedDate===void 0&&(o.purposes.forEach(c=>{this.byPurposeVendorMap[String(c)].consent.add(n)}),o.specialPurposes.forEach(c=>{this.bySpecialPurposeVendorMap[String(c)].add(n)}),o.legIntPurposes.forEach(c=>{this.byPurposeVendorMap[String(c)].legInt.add(n)}),o.flexiblePurposes&&o.flexiblePurposes.forEach(c=>{this.byPurposeVendorMap[String(c)].flexible.add(n)}),o.features.forEach(c=>{this.byFeatureVendorMap[String(c)].add(n)}),o.specialFeatures.forEach(c=>{this.bySpecialFeatureVendorMap[String(c)].add(n)}),r[n]=o),r},{})}getFilteredVendors(e,r,n,o){const c=e.charAt(0).toUpperCase()+e.slice(1);let a;const d={};return e==="purpose"&&n?a=this["by"+c+"VendorMap"][String(r)][n]:a=this["by"+(o?"Special":"")+c+"VendorMap"][String(r)],a.forEach(h=>{d[String(h)]=this.vendors[String(h)]}),d}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){const e=new v(this.getJson());return this.lang_!==v.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return typeof e=="object"&&typeof e.narrowVendorsTo=="function"}};i(v,"LANGUAGE_CACHE",new Map),i(v,"CACHE",new Map),i(v,"LATEST_CACHE_KEY",0),i(v,"DEFAULT_LANGUAGE","EN"),i(v,"consentLanguages",new ke),i(v,"baseUrl_"),i(v,"latestFilename","vendor-list.json"),i(v,"versionedFilename","archives/vendor-list-v[VERSION].json"),i(v,"languageFilename","purposes-[LANG].json");let O=v;class te extends se{constructor(e){super();i(this,"isServiceSpecific_",!1);i(this,"supportOOB_",!0);i(this,"useNonStandardTexts_",!1);i(this,"purposeOneTreatment_",!1);i(this,"publisherCountryCode_","AA");i(this,"version_",2);i(this,"consentScreen_",0);i(this,"policyVersion_",4);i(this,"consentLanguage_","EN");i(this,"cmpId_",0);i(this,"cmpVersion_",0);i(this,"vendorListVersion_",0);i(this,"numCustomPurposes_",0);i(this,"gvl_");i(this,"created");i(this,"lastUpdated");i(this,"specialFeatureOptins",new b);i(this,"purposeConsents",new b);i(this,"purposeLegitimateInterests",new b);i(this,"publisherConsents",new b);i(this,"publisherLegitimateInterests",new b);i(this,"publisherCustomConsents",new b);i(this,"publisherCustomLegitimateInterests",new b);i(this,"customPurposes");i(this,"vendorConsents",new b);i(this,"vendorLegitimateInterests",new b);i(this,"vendorsDisclosed",new b);i(this,"vendorsAllowed",new b);i(this,"publisherRestrictions",new ar);e&&(this.gvl=e),this.updated()}set gvl(e){O.isInstanceOf(e)||(e=new O(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}get gvl(){return this.gvl_}set cmpId(e){if(e=Number(e),Number.isInteger(e)&&e>1)this.cmpId_=e;else throw new $("cmpId",e)}get cmpId(){return this.cmpId_}set cmpVersion(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.cmpVersion_=e;else throw new $("cmpVersion",e)}get cmpVersion(){return this.cmpVersion_}set consentScreen(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.consentScreen_=e;else throw new $("consentScreen",e)}get consentScreen(){return this.consentScreen_}set consentLanguage(e){this.consentLanguage_=e}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(e){if(/^([A-z]){2}$/.test(e))this.publisherCountryCode_=e.toUpperCase();else throw new $("publisherCountryCode",e)}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(e){if(e=Number(e)>>0,e<0)throw new $("vendorListVersion",e);this.vendorListVersion_=e}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new $("policyVersion",e)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(e){this.version_=parseInt(e,10)}get version(){return this.version_}set isServiceSpecific(e){this.isServiceSpecific_=e}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardTexts(e){this.useNonStandardTexts_=e}get useNonStandardTexts(){return this.useNonStandardTexts_}set supportOOB(e){this.supportOOB_=e}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(e){this.purposeOneTreatment_=e}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let e=this.numCustomPurposes_;if(typeof this.customPurposes=="object"){const r=Object.keys(this.customPurposes).sort((n,o)=>Number(n)-Number(o));e=parseInt(r.pop(),10)}return e}set numCustomPurposes(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new $("numCustomPurposes",e)}updated(){const e=new Date,r=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=r,this.lastUpdated=r}}i(te,"consentLanguages",O.consentLanguages);class le{static encode(t,e){let r="",n;return t=cr.process(t,e),Array.isArray(e==null?void 0:e.segments)?n=e.segments:n=new no(t,e)[""+t.version],n.forEach((o,c)=>{let a="";c<n.length-1&&(a="."),r+=He.encode(t,o)+a}),r}static decode(t,e){const r=t.split("."),n=r.length;e||(e=new te);for(let o=0;o<n;o++){const c=r[o],d=U.decode(c.charAt(0)).substr(0,u.segmentType),h=he.ID_TO_KEY[g.decode(d,u.segmentType).toString()];He.decode(c,e,h)}return e}}var I;(function(s){s.PING="ping",s.GET_TC_DATA="getTCData",s.GET_IN_APP_TC_DATA="getInAppTCData",s.GET_VENDOR_LIST="getVendorList",s.ADD_EVENT_LISTENER="addEventListener",s.REMOVE_EVENT_LISTENER="removeEventListener"})(I||(I={}));var G;(function(s){s.STUB="stub",s.LOADING="loading",s.LOADED="loaded",s.ERROR="error"})(G||(G={}));var j;(function(s){s.VISIBLE="visible",s.HIDDEN="hidden",s.DISABLED="disabled"})(j||(j={}));var X;(function(s){s.TC_LOADED="tcloaded",s.CMP_UI_SHOWN="cmpuishown",s.USER_ACTION_COMPLETE="useractioncomplete"})(X||(X={}));class ve{constructor(t,e,r,n){i(this,"listenerId");i(this,"callback");i(this,"next");i(this,"param");i(this,"success",!0);Object.assign(this,{callback:t,listenerId:r,param:e,next:n});try{this.respond()}catch(o){this.invokeCallback(null)}}invokeCallback(t){const e=t!==null;typeof this.next=="function"?this.callback(this.next,t,e):this.callback(t,e)}}class ge extends ve{respond(){this.throwIfParamInvalid(),this.invokeCallback(new lr(this.param,this.listenerId))}throwIfParamInvalid(){if(this.param!==void 0&&(!Array.isArray(this.param)||!this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}}class oo{constructor(){i(this,"eventQueue",new Map);i(this,"queueNumber",0)}add(t){return this.eventQueue.set(this.queueNumber,t),this.queueNumber++}remove(t){return this.eventQueue.delete(t)}exec(){this.eventQueue.forEach((t,e)=>{new ge(t.callback,t.param,e,t.next)})}clear(){this.queueNumber=0,this.eventQueue.clear()}get size(){return this.eventQueue.size}}class p{static reset(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=G.LOADING,this.disabled=!1,this.displayStatus=j.HIDDEN,this.eventQueue.clear()}}i(p,"apiVersion","2"),i(p,"tcfPolicyVersion"),i(p,"eventQueue",new oo),i(p,"cmpStatus",G.LOADING),i(p,"disabled",!1),i(p,"displayStatus",j.HIDDEN),i(p,"cmpId"),i(p,"cmpVersion"),i(p,"eventStatus"),i(p,"gdprApplies"),i(p,"tcModel"),i(p,"tcString");class Xe{constructor(){i(this,"cmpId",p.cmpId);i(this,"cmpVersion",p.cmpVersion);i(this,"gdprApplies",p.gdprApplies);i(this,"tcfPolicyVersion",p.tcfPolicyVersion)}}class ao extends Xe{constructor(){super(...arguments);i(this,"cmpStatus",G.ERROR)}}class lr extends Xe{constructor(e,r){super();i(this,"tcString");i(this,"listenerId");i(this,"eventStatus");i(this,"cmpStatus");i(this,"isServiceSpecific");i(this,"useNonStandardTexts");i(this,"publisherCC");i(this,"purposeOneTreatment");i(this,"outOfBand");i(this,"purpose");i(this,"vendor");i(this,"specialFeatureOptins");i(this,"publisher");if(this.eventStatus=p.eventStatus,this.cmpStatus=p.cmpStatus,this.listenerId=r,p.gdprApplies){const n=p.tcModel;this.tcString=p.tcString,this.isServiceSpecific=n.isServiceSpecific,this.useNonStandardTexts=n.useNonStandardTexts,this.purposeOneTreatment=n.purposeOneTreatment,this.publisherCC=n.publisherCountryCode,this.outOfBand={allowedVendors:this.createVectorField(n.vendorsAllowed,e),disclosedVendors:this.createVectorField(n.vendorsDisclosed,e)},this.purpose={consents:this.createVectorField(n.purposeConsents),legitimateInterests:this.createVectorField(n.purposeLegitimateInterests)},this.vendor={consents:this.createVectorField(n.vendorConsents,e),legitimateInterests:this.createVectorField(n.vendorLegitimateInterests,e)},this.specialFeatureOptins=this.createVectorField(n.specialFeatureOptins),this.publisher={consents:this.createVectorField(n.publisherConsents),legitimateInterests:this.createVectorField(n.publisherLegitimateInterests),customPurpose:{consents:this.createVectorField(n.publisherCustomConsents),legitimateInterests:this.createVectorField(n.publisherCustomLegitimateInterests)},restrictions:this.createRestrictions(n.publisherRestrictions)}}}createRestrictions(e){const r={};if(e.numRestrictions>0){const n=e.getMaxVendorId();for(let o=1;o<=n;o++){const c=o.toString();e.getRestrictions(o).forEach(a=>{const d=a.purposeId.toString();r[d]||(r[d]={}),r[d][c]=a.restrictionType})}}return r}createVectorField(e,r){return r?r.reduce((n,o)=>(n[String(o)]=e.has(Number(o)),n),{}):[...e].reduce((n,o)=>(n[o[0].toString(10)]=o[1],n),{})}}class co extends lr{constructor(t){super(t),delete this.outOfBand}createVectorField(t){return[...t].reduce((e,r)=>(e+=r[1]?"1":"0",e),"")}createRestrictions(t){const e={};if(t.numRestrictions>0){const r=t.getMaxVendorId();t.getRestrictions().forEach(n=>{e[n.purposeId.toString()]="_".repeat(r)});for(let n=0;n<r;n++){const o=n+1;t.getRestrictions(o).forEach(c=>{const a=c.restrictionType.toString(),d=c.purposeId.toString(),h=e[d].substr(0,n),f=e[d].substr(n+1);e[d]=h+a+f})}}return e}}class lo extends Xe{constructor(){super();i(this,"cmpLoaded",!0);i(this,"cmpStatus",p.cmpStatus);i(this,"displayStatus",p.displayStatus);i(this,"apiVersion",String(p.apiVersion));i(this,"gvlVersion");p.tcModel&&p.tcModel.vendorListVersion&&(this.gvlVersion=+p.tcModel.vendorListVersion)}}class uo extends ve{respond(){this.invokeCallback(new lo)}}class po extends ge{respond(){this.throwIfParamInvalid(),this.invokeCallback(new co(this.param))}}class ho extends ve{respond(){const t=p.tcModel,e=t.vendorListVersion;let r;this.param===void 0&&(this.param=e),this.param===e&&t.gvl?r=t.gvl:r=new O(this.param),r.readyPromise.then(()=>{this.invokeCallback(r.getJson())})}}class fo extends ge{respond(){this.listenerId=p.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),super.respond()}}class vo extends ve{respond(){this.invokeCallback(p.eventQueue.remove(this.param))}}var Uo,Mo,jo,Go,ko,Ho;class w{}Uo=I.PING,Mo=I.GET_TC_DATA,jo=I.GET_IN_APP_TC_DATA,Go=I.GET_VENDOR_LIST,ko=I.ADD_EVENT_LISTENER,Ho=I.REMOVE_EVENT_LISTENER,i(w,Uo,uo),i(w,Mo,ge),i(w,jo,po),i(w,Go,ho),i(w,ko,fo),i(w,Ho,vo);class ur{static has(t){return typeof t=="string"&&(t=Number(t)),this.set_.has(t)}}i(ur,"set_",new Set([0,2,void 0,null]));const De="__tcfapi";class go{constructor(t){i(this,"callQueue");i(this,"customCommands");if(t){let e=I.ADD_EVENT_LISTENER;if(t!=null&&t[e])throw new Error(`Built-In Custom Commmand for ${e} not allowed: Use ${I.GET_TC_DATA} instead`);if(e=I.REMOVE_EVENT_LISTENER,t!=null&&t[e])throw new Error(`Built-In Custom Commmand for ${e} not allowed`);t!=null&&t[I.GET_TC_DATA]&&(t[I.ADD_EVENT_LISTENER]=t[I.GET_TC_DATA],t[I.REMOVE_EVENT_LISTENER]=t[I.GET_TC_DATA]),this.customCommands=t}try{this.callQueue=window[De]()||[]}catch(e){this.callQueue=[]}finally{window[De]=this.apiCall.bind(this),this.purgeQueuedCalls()}}apiCall(t,e,r,...n){if(typeof t!="string")r(null,!1);else if(!ur.has(e))r(null,!1);else{if(typeof r!="function")throw new Error("invalid callback function");p.disabled?r(new ao,!1):!this.isCustomCommand(t)&&!this.isBuiltInCommand(t)?r(null,!1):this.isCustomCommand(t)&&!this.isBuiltInCommand(t)?this.customCommands[t](r,...n):t===I.PING?this.isCustomCommand(t)?new w[t](this.customCommands[t],n[0],null,r):new w[t](r,n[0]):p.tcModel===void 0?this.callQueue.push([t,e,r,...n]):this.isCustomCommand(t)&&this.isBuiltInCommand(t)?new w[t](this.customCommands[t],n[0],null,r):new w[t](r,n[0])}}purgeQueuedCalls(){const t=this.callQueue;this.callQueue=[],t.forEach(e=>{window[De](...e)})}isCustomCommand(t){return this.customCommands&&typeof this.customCommands[t]=="function"}isBuiltInCommand(t){return w[t]!==void 0}}class yo{constructor(t,e,r=!1,n){i(this,"callResponder");i(this,"isServiceSpecific");i(this,"numUpdates",0);this.throwIfInvalidInt(t,"cmpId",2),this.throwIfInvalidInt(e,"cmpVersion",0),p.cmpId=t,p.cmpVersion=e,p.tcfPolicyVersion=4,this.isServiceSpecific=!!r,this.callResponder=new go(n)}throwIfInvalidInt(t,e,r){if(!(typeof t=="number"&&Number.isInteger(t)&&t>=r))throw new Error(`Invalid ${e}: ${t}`)}update(t,e=!1){if(p.disabled)throw new Error("CmpApi Disabled");p.cmpStatus=G.LOADED,e?(p.displayStatus=j.VISIBLE,p.eventStatus=X.CMP_UI_SHOWN):p.tcModel===void 0?(p.displayStatus=j.DISABLED,p.eventStatus=X.TC_LOADED):(p.displayStatus=j.HIDDEN,p.eventStatus=X.USER_ACTION_COMPLETE),p.gdprApplies=t!==null,p.gdprApplies?(t===""?(p.tcModel=new te,p.tcModel.cmpId=p.cmpId,p.tcModel.cmpVersion=p.cmpVersion):p.tcModel=le.decode(t),p.tcModel.isServiceSpecific=this.isServiceSpecific,p.tcfPolicyVersion=Number(p.tcModel.policyVersion),p.tcString=t):p.tcModel=null,this.numUpdates===0?this.callResponder.purgeQueuedCalls():p.eventQueue.exec(),this.numUpdates++}disable(){p.disabled=!0,p.cmpStatus=G.ERROR}}const Be=323,Tt=3,Ot="TCF_COOKIE";class mo{constructor(){i(this,"_cmpApi",null);i(this,"_gvl",null);i(this,"_tcModel",null);i(this,"_tcString",null);i(this,"_stack",-1);i(this,"_vendorIds",[]);this._cmpApi=new yo(Be,Tt,!0)}prepareVendorIds(){if(this._gvl===null)throw"call init first";this._vendorIds=Object.keys(this._gvl.vendors).map(t=>parseInt(t))}get vendorIds(){return this._vendorIds}get gvl(){if(this._gvl===null)throw"call init first";return this._gvl}get stack(){return this._stack}get TCString(){if(this._tcString===null)throw"call init first";return this._tcString}get currentTCModel(){if(this._gvl===null)throw"call init first";return this._tcModel!==null?this._tcModel:(this.currentTCString!==""?this._tcModel=le.decode(this.currentTCString):this._tcModel=new te(this._gvl),this._tcModel)}get currentTCString(){return this.getTCStringFromStorage()}getTCStringFromStorage(){const e=Ze.findCookies(Ot).shift();return e?e.value:""}saveTCStringInStorage(t){this._tcModel=null,Ze.setCookie(Ot,t,B.cookieDomain.value,!1,B.cookieLifetime.value)}init(t){return S(this,null,function*(){if(O.latestFilename="vendor-list.json",O.languageFilename="purposes-[LANG].json",O.baseUrl=B.globalStorageUrl.value,this._gvl=new O,yield this._gvl.readyPromise,this._tcString=le,B.language.value!=="en")try{yield this.gvl.changeLanguage(B.language.value)}catch(e){}this.gvl.narrowVendorsTo(t)})}signalShowUI(){this.updateTCString(this.currentTCString,!0)}signalDoNowShowUI(){this.updateTCString(this.currentTCString,!1)}isTCStringUpToDate(){if(this._gvl===null)throw"call init first";return!(this.getTCStringFromStorage()==""||typeof this.currentTCModel.vendorListVersion!="number"||this.currentTCModel.vendorListVersion<this._gvl.vendorListVersion)}saveConsentAll(){return S(this,null,function*(){const t=[],e=[];let r=[];const n=[],o=[],c=[];if(this._gvl===null)throw"call init first";return yield this._gvl.readyPromise,Object.keys(this._gvl.purposes).forEach(a=>{if(this._gvl===null)throw"call init first";t.push(this._gvl.purposes[a].id)}),Object.keys(this._gvl.specialFeatures).forEach(a=>{if(this._gvl===null)throw"call init first";e.push(this._gvl.specialFeatures[a].id)}),Object.keys(this._gvl.vendors).forEach(a=>{if(this._gvl===null)throw"call init first";n.push(this._gvl.vendors[a].id),o.push(this._gvl.vendors[a].id),c.push(this._gvl.vendors[a].id)}),r=yield this.legIntPurposeList(n),this.saveConsent(t,n,c,o,e,r)})}saveConsent(t,e,r,n,o,c){return S(this,null,function*(){const a=yield this.convertSelectionsToTCModel(t,e,r,n,o,c),d=le.encode(a);return this.updateTCString(d,!1)})}convertSelectionsToTCModel(t,e,r,n,o,c){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;const a=new te(this._gvl);return yield a.gvl.readyPromise,a.cmpId=Be,a.cmpVersion=Tt,a.isServiceSpecific=!0,a.publisherCountryCode="DE",a.consentScreen=B.cookieVersion.value,e.forEach(d=>{var f;const h=(f=this._gvl)==null?void 0:f.vendors[d];h&&!h.deletedDate&&a.vendorConsents.set(d)}),c.forEach(d=>a.purposeLegitimateInterests.set(d)),r.forEach(d=>{var f;const h=(f=this._gvl)==null?void 0:f.vendors[d];h&&!h.deletedDate&&a.vendorLegitimateInterests.set(d)}),n.forEach(d=>{var f;const h=(f=this._gvl)==null?void 0:f.vendors[d];h&&!h.deletedDate&&a.vendorsDisclosed.set(d)}),o.forEach(d=>a.specialFeatureOptins.set(d)),t.forEach(d=>a.purposeConsents.set(d)),c.forEach(d=>a.purposeLegitimateInterests.set(d)),a})}updateTCString(t,e){if(this._gvl===null||this._cmpApi===null)throw"call init first";this.saveTCStringInStorage(t),hr.debug(`Called cmpApi.update() with TCstring: ${t} and showingUi: ${e}`),this._cmpApi.update(t,e)}vendorListByPurpose(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";return yield this._gvl.readyPromise,this._gvl.getVendorsWithConsentPurpose(t)})}vendorListBySpecialFeature(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";return yield this._gvl.readyPromise,this._gvl.getVendorsWithSpecialFeature(t)})}vendorListByLegInt(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";return yield this._gvl.readyPromise,this._gvl.getVendorsWithLegIntPurpose(t)})}vendorListByFeature(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";return yield this._gvl.readyPromise,this._gvl.getVendorsWithFeature(t)})}vendorListBySpecialPurpose(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";return yield this._gvl.readyPromise,this._gvl.getVendorsWithSpecialPurpose(t)})}purposeList(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;const e=[];for(const r of t){const n=this._gvl.vendors[r];for(const o of n.purposes)e.indexOf(o)<0&&e.push(o)}return e})}legIntPurposeList(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;const e=[];for(const r of t){const n=this._gvl.vendors[r];for(const o of n.legIntPurposes)e.indexOf(o)<0&&e.push(o)}return e})}specialPurposeList(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;const e=[];for(const r of t){const n=this._gvl.vendors[r];for(const o of n.specialPurposes)e.indexOf(o)<0&&e.push(o)}return e})}featureList(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;const e=[];for(const r of t){const n=this._gvl.vendors[r];for(const o of n.features)e.indexOf(o)<0&&e.push(o)}return e})}specialFeatureList(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;const e=[];for(const r of t){const n=this._gvl.vendors[r];for(const o of n.specialFeatures)e.indexOf(o)<0&&e.push(o)}return e})}dataCategoryList(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;const e=[];for(const r of t){const n=this._gvl.vendors[r];if(n.dataDeclaration)for(const o of n.dataDeclaration)e.indexOf(o)<0&&e.push(o)}return e})}computeStack(t){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;const e=this._gvl.stacks;let r=[];Object.keys(e).forEach(c=>{const a=e[c];for(const h of t)if(h!==1&&a.purposes.indexOf(h)<0)return;const d=a.purposes.filter(h=>t.indexOf(h)<0);r[d.length]=r[d.length]||[],r[d.length].push(a)}),r=r.filter(c=>c.length>0);const n=r.shift();if(typeof n=="undefined")return 0;const o=n.shift();return o===void 0?0:(this._stack=o.id,o.id)})}missingPurposes(t,e){return S(this,null,function*(){if(this._gvl===null)throw"call init first";yield this._gvl.readyPromise;let r=Object.assign([],t);const n=this._gvl.stacks[e];for(const o of n.purposes)r=r.filter(c=>c!=o);return r})}hasConsentPurpose(t){return this.currentTCModel.purposeConsents.has(t)}hasConsentSpecialFeature(t){return this.currentTCModel.specialFeatureOptins.has(t)}hasConsentVendor(t){return this.currentTCModel.vendorConsents.has(t)}hasConsentVendorLegInt(t){return this.currentTCModel.vendorLegitimateInterests.has(t)}hasConsentLegInt(t){return this.currentTCModel.purposeLegitimateInterests.has(t)}hasWhichConsents(){const t={purposes:[],specialFeatures:[],vendors:[],vendorsLegInt:[],legIntPurposes:[]};return this.currentTCModel.purposeConsents.forEach((e,r)=>{e&&t.purposes.push(r)}),this.currentTCModel.specialFeatureOptins.forEach((e,r)=>{e&&t.specialFeatures.push(r)}),this.currentTCModel.vendorConsents.forEach((e,r)=>{e&&t.vendors.push(r)}),this.currentTCModel.vendorLegitimateInterests.forEach((e,r)=>{e&&t.vendorsLegInt.push(r)}),this.currentTCModel.purposeLegitimateInterests.forEach((e,r)=>{e&&t.legIntPurposes.push(r)}),t}sortVendorsAlphabetically(t){const e=[];return Object.keys(t).forEach(r=>{e.push(t[r])}),e.sort(function(r,n){return r.name.localeCompare(n.name)}),e}}const Eo=new mo,zo=Object.freeze(Object.defineProperty({__proto__:null,IABTCF:Eo,cmpApiId:Be},Symbol.toStringTag,{value:"Module"}));export{le as T,Eo as _,Be as c,zo as i};
