.wp-block-woocommerce-checkout {
  .wc-block-components-sidebar-layout {
    display: block;
    margin: 0;
    position: static;
  }

  &.is-loading {
    .wp-block-woocommerce-germanized-pro-multilevel-checkout {
      display: flex;
      flex-wrap: wrap;
      margin: 0 auto $gap;
      position: relative;
    }

    .wp-block-woocommerce-germanized-pro-multilevel-checkout-sidebar {
      width: 35%;
      padding-left: math.percentage(math.div($gap-large, 1060px));
    }
    .wp-block-woocommerce-checkout-fields-block {
      width: 65%;
      padding-right: math.percentage(math.div($gap-largest, 1060px)); // ~1060px is the default width of the content area in Storefront.
    }
    .wp-block-woocommerce-germanized-pro-multilevel-checkout-sidebar,
    .wp-block-woocommerce-checkout-fields-block .wp-block-woocommerce-germanized-pro-multilevel-checkout-contact-step {
      box-sizing: border-box;
      background: none !important;
      margin: 0 !important;
      display: block !important;
      line-height: 1;
      opacity: 1 !important;

      &::after {
        display: none;
        content: "";
        position: static;
        background: none;
        animation: none;
        transform: none;
        height: 0;
      }

      > div {
        @include placeholder();
        margin: 0 0 1.5em 0;
        display: none;
      }

      .wp-block-woocommerce-checkout-contact-information-block {
        min-height: 10em;
        display: block;
        visibility: visible;
      }
      .wp-block-woocommerce-checkout-shipping-address-block {
        min-height: 24em;
        display: block;
        visibility: visible;
      }
      .wp-block-woocommerce-checkout-actions-block {
        width: 50%;
        min-height: 4em;
        margin-left: 50%;
        display: block;
      }
      .wp-block-woocommerce-checkout-order-summary-block {
        min-height: 47em;
        display: block;
      }
      .wc-block-components-panel > h2 {
        @include font-size(regular);
        @include reset-box();
        @include reset-color();
        @include reset-typography();
        .wc-block-components-panel__button {
          font-weight: 400;
        }
      }
      .wc-block-components-totals-item,
      .wc-block-components-panel {
        padding-left: $gap;
        padding-right: $gap;
      }
      .wc-block-components-totals-coupon-link {
        margin-left: $gap;
        margin-right: $gap;
      }
    }
  }
}

.wp-block-woocommerce-germanized-pro-multilevel-checkout {
  display: flex;
  flex-wrap: wrap;
  margin: 0 auto 16px;
  position: relative;
  flex-direction: row;
  flex: 1 0 auto;
  box-sizing: border-box;

  &.is-processing {
    .wc-gzdp-multilevel-checkout-breadcrumbs {
      opacity: 0.6;
    }

    .wp-block-woocommerce-germanized-pro-multilevel-checkout-step {
      > div, fieldset {
        &:not(.wc-gzdp-multilevel-checkout-step-footer) {
          opacity: 0.6;
        }
      }
    }
  }

  .wc-block-components-form {
    .wc-block-components-checkout-step {
      padding: 0;

      .wc-block-components-title.wc-block-components-title {
        &::before {
          content: "";
          position: static;
          transform: none;
        }
      }

      .wc-block-components-checkout-step__container {
        &::after {
          border: none;
          position: static;
        }
      }
    }
  }

  .wc-block-checkout__use-address-for-billing {
    display: none;
  }

  .wp-block-woocommerce-germanized-pro-multilevel-checkout-step {
    &.wc-gzdp-multilevel-checkout-step-enter,
    &.wc-gzdp-multilevel-checkout-step-appear {
      opacity: 0;
    }

    &.wc-gzdp-multilevel-checkout-step-enter-active,
    &.wc-gzdp-multilevel-checkout-step-appear-active {
      opacity: 1;
      transition: opacity 300ms linear;
      transform: translateX(0);
    }

    &.wc-gzdp-multilevel-checkout-step-exit {
      opacity: 1;
    }

    &.wc-gzdp-multilevel-checkout-step-exit-active {
      opacity: 0;
      transition: opacity 300ms linear;
    }

    &.step-inactive {
      display: none;
    }

    .wp-block-woocommerce-checkout-express-payment-block {
      .wc-block-components-express-payment {
        margin-top: em($gap-larger);
      }
    }

    .wp-block-woocommerce-checkout-order-summary-block {
      padding: 0 em($gap);
      @include with-translucent-border(1px);
      margin-top: em($gap);

      &::after {
        border-radius: 4px;
      }

      .wc-block-components-totals-wrapper {
        &::after {
          border-width: 0 0 1px;
        }

        &:last-child {
          &::after {
            border-width: 0;
          }
        }
      }

      .wp-block-woocommerce-checkout-order-summary-cart-items-block {
        display: none;
      }
      .wp-block-woocommerce-checkout-order-summary-coupon-form-block {
        display: none;
      }
      .wp-block-woocommerce-checkout-order-summary-discount-block {
        display: none;
      }
    }

    &.wp-block-woocommerce-germanized-pro-multilevel-checkout-step-payment {
      .wp-block-woocommerce-checkout-order-summary-block {
        display: none;
      }
    }

    .woocommerce-gzdp-multilevel-checkout-submit {
      .wc-block-components-checkout-return-to-cart-button {
        display: none;
      }

      .wc-block-checkout__actions {
        width: 50%;
        padding: 0;
        margin-left: auto;

        .wc-block-components-checkout-place-order-button {
          width: 100%;
        }

        &::after {
          border: 0;
          position: static;
        }
      }
    }
  }

  .wc-gzdp-block-multilevel-checkout__billing-address {
    .wc-block-components-checkout-step__content {
      .wc-block-components-checkout-step__heading {
        display: none;
      }
      .wc-block-components-checkout-step__description {
        display: none;
      }
    }

    .wc-block-components-radio-control-accordion-option {
      position: relative;

      .wc-block-components-radio-control__option-layout {
        @include font-size(small);
      }

      .wc-block-components-radio-control-accordion-content {
        @include font-size(small);
      }

      .wc-block-components-radio-control__option {
        padding-left: 56px;
        padding-right: 16px;
        margin: 0;
        padding-bottom: 1em;
        padding-top: 1em;
        @include with-translucent-border(1px 1px 0);

        .wc-block-components-radio-control__input {
          left: 16px;
        }

        &::after {
          border-width: 0;
        }
      }

      @include with-translucent-border(1px 1px 0);

      &:last-child {
        &::after {
          border-width: 1px;
        }
      }
    }
  }

  .wp-block-woocommerce-germanized-pro-multilevel-checkout-sidebar {
    box-sizing: border-box;
    margin: 0;
    padding-left: math.percentage(math.div($gap-large, 1060px));
    width: 35%;
    flex-grow: 0;
  }

  .wc-gzdp-multilevel-checkout-breadcrumbs {
    margin-bottom: em($gap);
    @include font-size(small);

    ol {
      display: flex;
      flex-wrap: wrap;
      padding-left: 0;
      margin-left: 0;
      margin-right: 0;

      li {
        display: flex;
        align-items: center;

        a {
          text-decoration: none;
        }

        svg {
          display: inline-block;
          vertical-align: middle;
        }
      }
    }
  }

  .wc-gzdp-multilevel-checkout-step-summary {
    background-clip: padding-box;
    @include with-translucent-border(1px);
    padding: 0 em($gap);
    margin-bottom: em($gap);

    &::after {
      border-radius: 4px;
    }

    .summary-block-item {
      display: flex;
      @include with-translucent-border(0 0 1px);
      padding: em($gap) 0;

      &:last-child {
        &::after {
          border: 0;
        }
      }

      .summary-edit {
        max-width: 10em;
        margin-left: auto;
      }

      &.summary-block-item-payment {
        .summary-content img {
          height: 24px;
          max-height: 24px;
          -o-object-fit: contain;
          object-fit: contain;
          -o-object-position: left;
          object-position: left;
        }
      }

      .summary-inner-wrapper {
        display: flex;
        flex-wrap: wrap;
        flex-grow: 1;

        .summary-header {
          flex: 0 1 5em;
          padding-right: 1em;
        }

        .summary-content {
          flex: 5;
          padding-right: 1em;

          address {
            @include font-size(small);
            font-style: normal;
            margin-bottom: 0;

            span {
              display: inline-block;
              padding: 0 4px 0 0;

              &::after {
                content: ", ";
              }

              &:last-child {
                &::after {
                  content: "";
                }
              }
            }
          }
        }
      }
    }
  }

  .wc-gzdp-multilevel-checkout-step-footer {
    padding: 1.5em 0;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;

    a {
      @include font-size(small);

      svg {
        display: inline-block;
        vertical-align: middle;
      }
    }

    button {
      .wc-block-components-spinner + .wc-block-components-button__text {
        visibility: hidden;
      }
    }

    button:last-child {
      margin-left: auto;
    }
  }
}

.wc-block-checkout {
  .wp-block-woocommerce-germanized-pro-multilevel-checkout-sidebar-mobile-nav {
    display: none;
  }

  &.is-small,
  &.is-mobile {
    .wc-block-components-address-address-wrapper {
      display: flex;
      flex-wrap: wrap;

      > div {
        width: 100%;
      }
    }

    .wc-gzdp-multilevel-checkout-step-summary {
      .summary-inner-wrapper {
        .summary-content {
          width: 100%;
          flex: 0 1 auto;
        }
      }
    }

    .wp-block-woocommerce-germanized-pro-multilevel-checkout-sidebar {
      padding: 0;
      width: 100%;

      > div {
        display: none;
      }

      .wp-block-woocommerce-germanized-pro-multilevel-checkout-sidebar-mobile-nav {
        display: block;
        width: 100%;

        .multilevel-checkout-sidebar-nav-toggle {
          background-color: $gray-100;
          border: 1px solid $universal-border;
          padding: em($gap);
          border-radius: $universal-border-radius;
          width: 100%;
          font: inherit;
          color: inherit;
          -webkit-font-smoothing: inherit;
          line-height: normal;
          display: flex;
          flex-wrap: wrap;
          align-items: center;
          justify-content: space-between;

          span {
            display: inline-flex;
            align-items: center;
          }

          svg {
            display: inline-block;
            vertical-align: middle;
          }
        }
      }

      .wp-block-woocommerce-checkout-order-summary-block {
        padding-top: em($gap);
      }

      .wp-block-woocommerce-checkout-order-summary-cart-items-block {
        .wc-block-components-order-summary {
          .wc-block-components-panel__button {
            display: none;
          }
        }

        &::after {
          border-top: none;
        }
      }

      &.is-open {
        > div {
          display: block;
        }
      }
    }

    .wc-block-checkout__add-note {
      margin: 0;
      padding: 0;

      &::after {
        display: none;
      }
    }

    .wc-block-checkout__add-note {
      border-bottom: none;
    }

    .wp-block-woocommerce-germanized-pro-multilevel-checkout-step {
      &.wp-block-woocommerce-germanized-pro-multilevel-checkout-step-payment {
        .wp-block-woocommerce-checkout-order-summary-block {
          display: block;
          margin-bottom: em($gap);
          padding: 0;

          &::after {
            display: none;
          }

          .wc-block-components-totals-wrapper {
            display: none !important;

            &.wp-block-woocommerce-checkout-order-summary-coupon-form-block {
              display: block !important;
              border: none;
              padding: 0;

              &::after {
                display: none;
              }
            }
          }
        }
      }

      .woocommerce-gzdp-multilevel-checkout-submit {
        .wc-block-components-checkout-return-to-cart-button {
          display: none;
        }

        .wc-block-checkout__actions {
          width: 50%;
          padding: 0;
          margin-left: auto;

          .wc-block-components-checkout-place-order-button {
            width: 100%;
          }

          &::after {
            border: 0;
            position: static;
          }
        }
      }
    }
  }

  &.is-mobile {
    .wp-block-woocommerce-germanized-pro-multilevel-checkout {
      .wc-gzdp-multilevel-checkout-step-footer {
        justify-content: center;
        padding-top: em($gap-small);

        button {
          width: 100%;
          order: 0;
        }

        a {
          text-align: center;
          width: 100%;
          order: 1;
          padding-top: em($gap);
        }

        &.woocommerce-gzdp-multilevel-checkout-submit {
          padding-top: em($gap-large);
        }

        .wp-block-woocommerce-checkout-actions-block {
          width: 100%;
          order: 0;
        }
      }
    }
  }
}