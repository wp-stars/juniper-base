!function(){var o,e;window.germanized=window.germanized||{},o=jQuery,(e=window.germanized).pro_checkout={params:{},init:function(){this.params=wc_gzdp_checkout_params,o(document).on("change","#billing_vat_id, #shipping_vat_id",this.onChangeVatID).on("change","#billing_company, #shipping_company",this.onChangeCompany).on("change","#billing_postcode, #shipping_postcode",this.onChangePostcode),o(document.body).on("updated_checkout",this.onUpdatedCheckout).on("checkout_error",this.onUpdatedCheckout).on("country_to_state_changing",this.onCountryToStateChange),this.onChangePostcode()},onCountryToStateChange:function(){e.pro_checkout.onChangePostcode()},getVatExemptPostcodesByCountry:function(o){var t=e.pro_checkout;return o=o.toString().toUpperCase(),t.params.vat_exempt_postcodes.hasOwnProperty(o)?t.params.vat_exempt_postcodes[o]:[]},onChangePostcode:function(){var t=o(".woocommerce-billing-fields, .woocommerce-shipping-fields"),n=e.pro_checkout;t.find("#billing_country, #shipping_country").each((function(e,i){var a=t.find(i);if(a.length>0){var c="billing";a.attr("id").includes("shipping")&&(c="shipping");var r=t.find("#"+c+"_vat_id"),d=t.find("#"+c+"_postcode");if(r.length>0&&d.length>0){var s=r.closest(".form-row"),g=a.val(),h=n.getVatExemptPostcodesByCountry(g),m=d.val().toString().toUpperCase().trim();if(m=m.replace(/[\\s\\-]/,""),"GB"===g&&"no"===n.params.great_britain_supports_vat_id)"BT"===m.substring(0,2)?s.show():s.hide();else if(h.length>0){var l=!1;if(o.each(h,(function(o,e){if(e.includes("*")){if((e=e.replace("*",""))===m.substring(0,e.length))return l=!0,!1}else if(e===m)return l=!0,!1})),l)s.hide();else{o(document.body).off("country_to_state_changing",n.onCountryToStateChange);var p=o("shipping"===c?".woocommerce-shipping-fields":".woocommerce-billing-fields");o(document.body).trigger("country_to_state_changing",[g,p]),o(document.body).on("country_to_state_changing",n.onCountryToStateChange)}}}}}))},onUpdatedCheckout:function(){var e=o(".woocommerce-billing-fields, .woocommerce-shipping-fields"),t=e.find("#billing_vat_id:visible, #shipping_vat_id:visible"),n=o(".woocommerce-error"),i=!1;if(n.length>0){var a=n.find('[data-id$="vat_id"]');if(a.length>0){var c=a.data("id");t=e.find("#"+c),i=!0}}if(t.length>0&&t.is(":input")){var r=t.closest(".form-row");r.removeClass("woocommerce-validated woocommerce-invalid"),i?r.addClass("woocommerce-invalid"):r.addClass("woocommerce-validated")}},validateField:function(o){var t=e.pro_checkout;if(o.length>0&&o.is(":input")){var n=o.val(),i=o.closest(".form-row");n.length>0&&(t.validateId(n)?i.removeClass("woocommerce-invalid"):i.removeClass("woocommerce-validated"))}},validateId:function(o){return/^(CHE[0-9]{9}|ATU[0-9]{8}|IX([0-9]{9}|[0-9]{12})|BE[01][0-9]{9}|BG[0-9]{9,10}|HR[0-9]{11}|CY[A-Z0-9]{9}|CZ[0-9]{8,10}|DK[0-9]{8}|EE[0-9]{9}|FI[0-9]{8}|FR[0-9A-Z]{2}[0-9]{9}|DE[0-9]{9}|EL[0-9]{9}|HU[0-9]{8}|IE([0-9]{7}[A-Z]{1,2}|[0-9][A-Z][0-9]{5}[A-Z])|IT[0-9]{11}|LV[0-9]{11}|LT([0-9]{9}|[0-9]{12})|LU[0-9]{8}|MT[0-9]{8}|NL[0-9]{9}B[0-9]{2}|PL[0-9]{10}|PT[0-9]{9}|RO[0-9]{2,10}|SK[0-9]{10}|SI[0-9]{8}|ES[A-Z]([0-9]{8}|[0-9]{7}[A-Z])|SE[0-9]{12}|GB([0-9]{9}|[0-9]{12}|GD[0-4][0-9]{2}|HA[5-9][0-9]{2}))$/.test(o)},onChangeVatID:function(){var t=e.pro_checkout,n=o(this);o(".woocommerce-error, .woocommerce-message").each((function(){o(this).parents(".woocommerce-form-login-toggle, .woocommerce-form-coupon-toggle").length<=0&&o(this).remove()})),t.validateField(n),o("body").trigger("update_checkout")},onChangeCompany:function(){o("body").trigger("update_checkout")}},o(document).ready((function(){e.pro_checkout.init()})),((window.germanizedPro=window.germanizedPro||{}).static=window.germanizedPro.static||{}).checkout={}}();