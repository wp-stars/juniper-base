!function(){var e,r;window.germanized=window.germanized||{},e=jQuery,(r=window.germanized).unit_price_observer_queue={queue:{},timeout:null,params:{},request:null,init:function(){this.params=wc_gzd_unit_price_observer_queue_params,this.queue={},this.timeout=null,this.request=null},execute:function(){var t=r.unit_price_observer_queue,i=[],u={...t.queue};t.queue={},t.timeout=null,Object.keys(u).forEach((function(e){i=i.concat([{product_id:u[e].productId,price:u[e].priceData.price,price_sale:u[e].priceData.sale_price,quantity:u[e].priceData.quantity,key:e}])})),t.request=e.ajax({type:"POST",url:t.params.wc_ajax_url.toString().replace("%%endpoint%%","gzd_refresh_unit_price"),data:{security:t.params.refresh_unit_price_nonce,products:i},success:function(e){Object.keys(u).forEach((function(r){var i=u[r],n=i.observer,c=i.priceData,a=i.priceSelector,o=i.isPrimary,s=t.getUnitPricesFromMap(c.unit_price);if(n)if(e.products.hasOwnProperty(r)){var p=e.products[r];n.stopObserver(n,a),parseInt(p.product_id)===n.getCurrentProductId(n)&&p.hasOwnProperty("unit_price_html")?n.unsetUnitPriceLoading(n,s,p.unit_price_html):n.unsetUnitPriceLoading(n,s),n.startObserver(n,a,o)}else n.stopObserver(n,a),n.unsetUnitPriceLoading(n,s),n.startObserver(n,a,o)}))},error:function(){Object.keys(u).forEach((function(e){var r=u[e],i=r.observer,n=r.priceData,c=r.priceSelector,a=r.isPrimary,o=t.getUnitPricesFromMap(n.unit_price);i&&(i.stopObserver(i,c),i.unsetUnitPriceLoading(i,o),i.startObserver(i,c,a))}))},dataType:"json"})},getUnitPricesFromMap:function(r){let t=[];return r.forEach((function(r){t=e.merge(t,e(r))})),e(t)},getQueueKey:function(e){return(e+"").replace(/[^a-zA-Z0-9]/g,"")},add:function(e,t,i,u,n){var c=r.unit_price_observer_queue,a=c.getQueueKey(t);if(c.queue.hasOwnProperty(a))i.unit_price.each((function(e,r){c.queue[a].priceData.unit_price.has(r)||c.queue[a].priceData.unit_price.set(r,r)}));else{var o=new Map;i.unit_price.each((function(e,r){o.set(r,r)})),i.unit_price=o,c.queue[a]={productId:t,observer:e,priceData:i,priceSelector:u,isPrimary:n}}clearTimeout(c.timeout),c.timeout=setTimeout(c.execute,500)}},e(document).ready((function(){r.unit_price_observer_queue.init()})),((window.germanized=window.germanized||{}).static=window.germanized.static||{})["unit-price-observer-queue"]={}}();