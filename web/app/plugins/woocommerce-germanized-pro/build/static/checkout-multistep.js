!function(){var e,t;window.germanized=window.germanized||{},e=jQuery,(t=window.germanized).multistep_checkout={params:{},init:function(){this.params=wc_gzd_multistep_checkout_params;var r=t.multistep_checkout,o=e(r.params.content_wrapper);o.find("#payment-manual").length?(o.find("#payment-manual").wrap('<div id="order-payment"></div>'),o.find("#order_payment_heading").insertBefore("#payment-manual")):(o.find("#payment").wrap('<div id="order-payment"></div>'),o.find("#order_payment_heading").insertBefore("#payment")),0===o.find("#order_review > #order-payment ~ *").length?o.find("#order-payment ~ *").wrapAll('<div id="order-verify"></div>'):o.find("#order_review > #order-payment ~ *").wrapAll('<div id="order-verify"></div>'),o.find("#order_review_heading").prependTo("#order-verify"),e.each(r.params.steps,(function(e,t){o.find(t.selector).length&&(o.find(t.selector).wrap('<div class="'+r.params.wrapper+" "+t.wrapper_classes.join(" ")+'" id="step-wrapper-'+t.id+'" data-id="'+t.id+'"></div>'),t.submit_html&&o.find("#step-wrapper-"+t.id).append(t.submit_html))})),e(".step-wrapper").hide(),e("body").trigger("wc_gzdp_multistep_checkout_init"),e(document).ajaxComplete(r.onAjaxComplete),e(document).ajaxSend(r.onAjaxSend),e(document).on("click",".step, .step-trigger",r.onClickStep).on("change",".step",r.onChangeStep).on("refresh",".step-wrapper",r.onRefreshStep),e(document.body).on("updated_checkout",r.onUpdateCheckout),e(document).on("click",".next-step-button",r.beforeChangeStep).on("click",".prev-step-button",r.beforeChangeStep),e(".step-nav li a.step:first").trigger("change")},onUpdateCheckout:function(){var r=t.multistep_checkout;e(r.params.content_wrapper).find("#order_review_heading").prependTo("#order-verify")},beforeChangeStep:function(){var r=t.multistep_checkout.getCurrentStep();e("#wc_gzdp_step_submit").remove(),e(".woocommerce-gzdp-checkout-verify-data").append('<input id="wc_gzdp_step_submit" type="text" name="wc_gzdp_step_submit" value="'+r.data("id")+'" style="display: none" />')},refreshCurrentStep:function(r){var o=t.multistep_checkout;e.post(o.params.ajax_url+"?action=woocommerce_gzdp_multistep_refresh_step",{wc_gzdp_multistep_refresh_step:o.params.refresh_step_nonce,step:r},o.onRefreshCurrentStepSuccess,"json")},onRefreshCurrentStepSuccess:function(){},onClickNextStep:function(e){t.multistep_checkout.nextStep(e)},nextStep:function(r){var o=t.multistep_checkout,n=o.getCurrentStep().find(".next-step-button"),a=n.data("next");n.data("current"),n.parents(".step-wrapper").hasClass("no-ajax")?(e(".step-"+a).trigger("change",e(".step-"+a)),r.preventDefault(),r.stopPropagation()):(e(document.body).on("updated_checkout",(function(){e(document).find(".woocommerce-checkout-payment .blockUI").length&&e(document).find(".woocommerce-checkout-payment").unblock()})),n.parents(".step-wrapper").trigger("refresh"),e("body").on("wc_gzdp_step_refreshed",(function(){o.checkoutHasErrors()||e(".step-"+a).trigger("change",e(".step-"+a)),e("body").off("wc_gzdp_step_refreshed")})))},checkoutHasErrors:function(){var t=!1,r=e(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout").find(".woocommerce-error, .is-error");return r.length>0&&(r.children().length>0||r.text().trim())&&(t=!0,r.find("li").length>0&&""===e.trim(r.find("li").text())&&(t=!1)),t},onRefreshStep:function(){e(this).find(".step-buttons").length&&(e(this).find(".step-buttons").prepend('<input type="hidden" id="wc-gzdp-step-submit" name="wc_gzdp_step_submit" value="'+e(this).data("id")+'" />'),e("body").on("checkout_error.multistep_checkout",(function(t){e("#wc-gzdp-step-submit").remove(),e("body").trigger("wc_gzdp_step_refreshed"),e("body").off("checkout_error.multistep_checkout")})))},onChangeStep:function(r,o){var n=e(this).data("href");t.multistep_checkout.refreshCurrentStep(n),e("#wc_gzdp_step_submit").remove(),e("#step-wrapper-"+n).length&&(void 0!==o&&e(".woocommerce-error").remove(),e(".step-nav").find(".active").removeClass("active"),e(this).parents("li").addClass("active"),e(this).attr("href","#step-"+e(this).data("href")),e(".step-wrapper").hide(),e(".step-wrapper").removeClass("step-wrapper-active"),e("#step-wrapper-"+n).show(),e("#step-wrapper-"+n).addClass("step-wrapper-active"),e("#order-verify").find(".woocommerce-invalid").removeClass("woocommerce-invalid woocommerce-invalid-required-field"),e("body").removeClass((function(e,t){return(t.match(/(^|\s)woocommerce-multistep-checkout-active-\S+/g)||[]).join(" ")})),window.location.hash="step-"+n,e("body").addClass("woocommerce-multistep-checkout-active-"+n),e("body").trigger("wc_gzdp_step_changed",e(this)))},onClickStep:function(){if(!e(this).attr("href"))return!1;var t=e(this).data("href");e("body").trigger("wc_gzdp_show_step",e(this)),e(".step-"+t).trigger("change",e(this))},getCheckoutUrl:function(){return wc_checkout_params.checkout_url},onAjaxSend:function(e,r,o){var n=t.multistep_checkout;n.getCheckoutUrl()===o.url&&n.beforeSubmitCheckout(e,o)},beforeSubmitCheckout:function(e,r){var o=t.multistep_checkout.getCurrentStep();"order"!==o.data("id")&&(r.data instanceof FormData?r.data.append("wc_gzdp_step_submit",o.data("id")):r.data+="&wc_gzdp_step_submit="+o.data("id"),t.multistep_checkout.nextStep(e))},getCurrentStep:function(){return e(".step-wrapper-active").length>0?e(".step-wrapper-active"):e(".step-wrapper-1")},init_payment_methods:function(){var t=e(".woocommerce-checkout").find('input[name="payment_method"]');1===t.length&&t.eq(0).hide(),0===t.filter(":checked").length&&t.eq(0).prop("checked",!0);var r=t.filter(":checked").eq(0).prop("id");t.length>1&&e('div.payment_box:not(".'+r+'")').filter(":visible").slideUp(0),t.filter(":checked").eq(0).trigger("click")},onRefreshFragments:function(r){var o=t.multistep_checkout;r.fragments.hasOwnProperty(".woocommerce-gzdp-checkout-verify-data")&&e(".woocommerce-gzdp-checkout-verify-data").replaceWith(r.fragments[".woocommerce-gzdp-checkout-verify-data"]),r.fragments.hasOwnProperty(".woocommerce-checkout-payment")&&r.fragments.hasOwnProperty("wc-gzdp-payment-wrap-needs-init")&&(e(".woocommerce-checkout-payment").replaceWith(r.fragments[".woocommerce-checkout-payment"]),o.init_payment_methods(),e(document.body).trigger("updated_checkout")),r.fragments.hasOwnProperty(".step-nav")&&(e(".step-nav").replaceWith(r.fragments[".step-nav"]),e("ul.step-nav li a").each((function(){var t=e(this).data("href");r.fragments.hasOwnProperty(".step-buttons-"+t)&&e(".step-buttons-"+t).replaceWith(r.fragments[".step-buttons-"+t])})))},getUpdateOrderReviewUrl:function(){return wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","update_order_review")},onAjaxComplete:function(e,r,o){var n=t.multistep_checkout;if((o.url===n.getUpdateOrderReviewUrl()||o.url===n.getCheckoutUrl())&&null!=r&&r.hasOwnProperty("responseText")){var a=null;try{a=JSON.parse(r.responseText)}catch(e){a=null}null!==a&&a.hasOwnProperty("fragments")&&n.onRefreshFragments(a)}}},e(document).ready((function(){t.multistep_checkout.init()})),((window.germanizedPro=window.germanizedPro||{}).static=window.germanizedPro.static||{})["checkout-multistep"]={}}();